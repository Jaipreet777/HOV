(function(){"use strict";const ut=async e=>{try{let t;if(!e){const o=window.location.pathname.match(/\/products\/(.*)/);if(t=o&&o[1],!t)return null}const n=window.slideruleData.storeUrl,r=n?`https://${n}/products/${e||t}.json`:`/products/${e||t}.json`,i=await(await fetch(r)).json();return i?i.product:null}catch(t){console.log(`SlideRule Analytics: product fetch failed. ${t}.`)}},de=async()=>{try{const e=window.slideruleData.storeUrl,t=e?`https://${e}/cart.json`:"/cart.json";return await(await fetch(t)).json()}catch(e){console.log(`SlideRule Analytics: cart fetch failed. ${e}`)}},Dn=async e=>{try{const t=window.slideruleData.storeUrl,n=t?`https://${t}/cart/update.json`:"/cart/update.json";return await(await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}catch(t){console.log(`SlideRule Analytics: update cart attributes failed. ${t}.`)}},wi=e=>{var t;return{...e,variants:e.variants.map(n=>({...n,price:`${n.price/100}`,price_min:`${n.price/100}`,price_max:`${n.price/100}`,compare_at_price:n.compare_at_price&&`${n.compare_at_price/100}`})),product_type:e.type,compare_at_price_varies:!1,images:(t=e.media)==null?void 0:t.map(n=>{var r;return{id:n.id,src:`https:${(r=n.preview_image)==null?void 0:r.src}`,alt:n.alt}}),image:{src:`https:${e.featured_image}`},requires_selling_plan:!1,selling_plan_groups:[],body_html:e.content}};var lt="undefined",Nn="object",Mn="any",jn="*",fe="__",dt=typeof process!="undefined"?process:{};dt.env&&dt.env.NODE_ENV;var Q=typeof window!="undefined";dt.versions!=null&&dt.versions.node!=null,typeof Deno!="undefined"&&Deno.core,Q&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Ln(e,t){return t.charAt(0)[e]()+t.slice(1)}var $i=Ln.bind(null,"toUpperCase"),Si=Ln.bind(null,"toLowerCase");function Ii(e){return Rn(e)?$i("null"):typeof e=="object"?ki(e):Object.prototype.toString.call(e).slice(8,-1)}function ft(e,t){t===void 0&&(t=!0);var n=Ii(e);return t?Si(n):n}function We(e,t){return typeof t===e}var ne=We.bind(null,"function"),we=We.bind(null,"string"),$e=We.bind(null,"undefined"),xi=We.bind(null,"boolean");We.bind(null,"symbol");function Rn(e){return e===null}function Oi(e){return ft(e)==="number"&&!isNaN(e)}function Ai(e){return ft(e)==="array"}function J(e){if(!Pi(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pi(e){return e&&(typeof e=="object"||e!==null)}function ki(e){return ne(e.constructor)?e.constructor.name:null}function Ci(e){return e instanceof Error||we(e.message)&&e.constructor&&Oi(e.constructor.stackTraceLimit)}function qn(e,t){if(typeof t!="object"||Rn(t))return!1;if(t instanceof e)return!0;var n=ft(new e(""));if(Ci(t))for(;t;){if(ft(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}qn.bind(null,TypeError),qn.bind(null,SyntaxError);function mt(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?Ti(e,t):n}function Ti(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function pt(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}pt(mt,"form"),pt(mt,"button"),pt(mt,"input"),pt(mt,"select");var Ve="global",Se=fe+"global"+fe,Ie=typeof self===Nn&&self.self===self&&self||typeof global===Nn&&global.global===global&&global||void 0;function me(e){return Ie[Se][e]}function pe(e,t){return Ie[Se][e]=t}function xe(e){delete Ie[Se][e]}function Oe(e,t,n){var r;try{if(qt(e)){var a=window[e];r=a[t].bind(a)}}catch{}return r||n}Ie[Se]||(Ie[Se]={});var gt={};function qt(e){if(typeof gt[e]!==lt)return gt[e];try{var t=window[e];t.setItem(lt,lt),t.removeItem(lt)}catch{return gt[e]=!1}return gt[e]=!0}var Je="cookie",ge=zn(),Un=ht,Ei=ht;function Fn(e){return ge?ht(e,"",-1):xe(e)}function zn(){if(ge!==void 0)return ge;var e="cookiecookie";try{ht(e,e),ge=document.cookie.indexOf(e)!==-1,Fn(e)}catch{ge=!1}return ge}function ht(e,t,n,r,a,i){if(typeof window!="undefined"){var o=arguments.length>1;return ge===!1&&(o?pe(e,t):me(e)),o?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(a?"; domain="+a:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Xe="localStorage",Di=qt.bind(null,"localStorage");Oe("localStorage","getItem",me),Oe("localStorage","setItem",pe),Oe("localStorage","removeItem",xe);var Ze="sessionStorage",Ni=qt.bind(null,"sessionStorage");Oe("sessionStorage","getItem",me),Oe("sessionStorage","setItem",pe),Oe("sessionStorage","removeItem",xe);function Ae(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(J(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var Mi=Di(),ji=Ni(),Li=zn();function ee(e,t){if(e){var n=Ut(t),r=!Bt(n),a=Ft(n)?Ae(localStorage.getItem(e)):void 0;if(r&&!$e(a))return a;var i=zt(n)?Ae(Un(e)):void 0;if(r&&i)return i;var o=Gt(n)?Ae(sessionStorage.getItem(e)):void 0;if(r&&o)return o;var s=me(e);return r?s:{localStorage:a,sessionStorage:o,cookie:i,global:s}}}function X(e,t,n){if(e&&!$e(t)){var r={},a=Ut(n),i=JSON.stringify(t),o=!Bt(a);return Ft(a)&&(r[Xe]=_t(Xe,t,Ae(localStorage.getItem(e))),localStorage.setItem(e,i),o)?r[Xe]:zt(a)&&(r[Je]=_t(Je,t,Ae(Un(e))),Ei(e,i),o)?r[Je]:Gt(a)&&(r[Ze]=_t(Ze,t,Ae(sessionStorage.getItem(e))),sessionStorage.setItem(e,i),o)?r[Ze]:(r[Ve]=_t(Ve,t,me(e)),pe(e,t),o?r[Ve]:r)}}function Ri(e,t){if(e){var n=Ut(t),r=ee(e,jn),a={};return!$e(r.localStorage)&&Ft(n)&&(localStorage.removeItem(e),a[Xe]=r.localStorage),!$e(r.cookie)&&zt(n)&&(Fn(e),a[Je]=r.cookie),!$e(r.sessionStorage)&&Gt(n)&&(sessionStorage.removeItem(e),a[Ze]=r.sessionStorage),!$e(r.global)&&yt(n,Ve)&&(xe(e),a[Ve]=r.global),a}}function Ut(e){return e?we(e)?e:e.storage:Mn}function Ft(e){return Mi&&yt(e,Xe)}function zt(e){return Li&&yt(e,Je)}function Gt(e){return ji&&yt(e,Ze)}function Bt(e){return e===jn||e==="all"}function yt(e,t){return e===Mn||e===t||Bt(e)}function _t(e,t,n){return{location:e,current:t,previous:n}}var qi={setItem:X,getItem:ee,removeItem:Ri},vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ui=Array.isArray,te=Ui;function Fi(){this.__data__=[],this.size=0}var zi=Fi;function Gi(e,t){return e===t||e!==e&&t!==t}var Ht=Gi,Bi=Ht;function Hi(e,t){for(var n=e.length;n--;)if(Bi(e[n][0],t))return n;return-1}var bt=Hi,Ki=bt,Wi=Array.prototype,Vi=Wi.splice;function Ji(e){var t=this.__data__,n=Ki(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Vi.call(t,n,1),--this.size,!0}var Xi=Ji,Zi=bt;function Yi(e){var t=this.__data__,n=Zi(t,e);return n<0?void 0:t[n][1]}var Qi=Yi,eo=bt;function to(e){return eo(this.__data__,e)>-1}var no=to,ro=bt;function ao(e,t){var n=this.__data__,r=ro(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var io=ao,oo=zi,so=Xi,co=Qi,uo=no,lo=io;function Pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=oo,Pe.prototype.delete=so,Pe.prototype.get=co,Pe.prototype.has=uo,Pe.prototype.set=lo;var wt=Pe,fo=wt;function mo(){this.__data__=new fo,this.size=0}var po=mo;function go(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var ho=go;function yo(e){return this.__data__.get(e)}var _o=yo;function vo(e){return this.__data__.has(e)}var bo=vo,wo=typeof vt=="object"&&vt&&vt.Object===Object&&vt,Gn=wo,$o=Gn,So=typeof self=="object"&&self&&self.Object===Object&&self,Io=$o||So||Function("return this")(),ae=Io,xo=ae,Oo=xo.Symbol,$t=Oo,Bn=$t,Hn=Object.prototype,Ao=Hn.hasOwnProperty,Po=Hn.toString,Ye=Bn?Bn.toStringTag:void 0;function ko(e){var t=Ao.call(e,Ye),n=e[Ye];try{e[Ye]=void 0;var r=!0}catch{}var a=Po.call(e);return r&&(t?e[Ye]=n:delete e[Ye]),a}var Co=ko,To=Object.prototype,Eo=To.toString;function Do(e){return Eo.call(e)}var No=Do,Kn=$t,Mo=Co,jo=No,Lo="[object Null]",Ro="[object Undefined]",Wn=Kn?Kn.toStringTag:void 0;function qo(e){return e==null?e===void 0?Ro:Lo:Wn&&Wn in Object(e)?Mo(e):jo(e)}var Qe=qo;function Uo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ke=Uo,Fo=Qe,zo=ke,Go="[object AsyncFunction]",Bo="[object Function]",Ho="[object GeneratorFunction]",Ko="[object Proxy]";function Wo(e){if(!zo(e))return!1;var t=Fo(e);return t==Bo||t==Ho||t==Go||t==Ko}var Vn=Wo,Vo=ae,Jo=Vo["__core-js_shared__"],Xo=Jo,Kt=Xo,Jn=function(){var e=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Zo(e){return!!Jn&&Jn in e}var Yo=Zo,Qo=Function.prototype,es=Qo.toString;function ts(e){if(e!=null){try{return es.call(e)}catch{}try{return e+""}catch{}}return""}var Xn=ts,ns=Vn,rs=Yo,as=ke,is=Xn,os=/[\\^$.*+?()[\]{}|]/g,ss=/^\[object .+?Constructor\]$/,cs=Function.prototype,us=Object.prototype,ls=cs.toString,ds=us.hasOwnProperty,fs=RegExp("^"+ls.call(ds).replace(os,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ms(e){if(!as(e)||rs(e))return!1;var t=ns(e)?fs:ss;return t.test(is(e))}var ps=ms;function gs(e,t){return e==null?void 0:e[t]}var hs=gs,ys=ps,_s=hs;function vs(e,t){var n=_s(e,t);return ys(n)?n:void 0}var he=vs,bs=he,ws=ae,$s=bs(ws,"Map"),Wt=$s,Ss=he,Is=Ss(Object,"create"),St=Is,Zn=St;function xs(){this.__data__=Zn?Zn(null):{},this.size=0}var Os=xs;function As(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ps=As,ks=St,Cs="__lodash_hash_undefined__",Ts=Object.prototype,Es=Ts.hasOwnProperty;function Ds(e){var t=this.__data__;if(ks){var n=t[e];return n===Cs?void 0:n}return Es.call(t,e)?t[e]:void 0}var Ns=Ds,Ms=St,js=Object.prototype,Ls=js.hasOwnProperty;function Rs(e){var t=this.__data__;return Ms?t[e]!==void 0:Ls.call(t,e)}var qs=Rs,Us=St,Fs="__lodash_hash_undefined__";function zs(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Us&&t===void 0?Fs:t,this}var Gs=zs,Bs=Os,Hs=Ps,Ks=Ns,Ws=qs,Vs=Gs;function Ce(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=Bs,Ce.prototype.delete=Hs,Ce.prototype.get=Ks,Ce.prototype.has=Ws,Ce.prototype.set=Vs;var Js=Ce,Yn=Js,Xs=wt,Zs=Wt;function Ys(){this.size=0,this.__data__={hash:new Yn,map:new(Zs||Xs),string:new Yn}}var Qs=Ys;function ec(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var tc=ec,nc=tc;function rc(e,t){var n=e.__data__;return nc(t)?n[typeof t=="string"?"string":"hash"]:n.map}var It=rc,ac=It;function ic(e){var t=ac(this,e).delete(e);return this.size-=t?1:0,t}var oc=ic,sc=It;function cc(e){return sc(this,e).get(e)}var uc=cc,lc=It;function dc(e){return lc(this,e).has(e)}var fc=dc,mc=It;function pc(e,t){var n=mc(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var gc=pc,hc=Qs,yc=oc,_c=uc,vc=fc,bc=gc;function Te(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Te.prototype.clear=hc,Te.prototype.delete=yc,Te.prototype.get=_c,Te.prototype.has=vc,Te.prototype.set=bc;var Vt=Te,wc=wt,$c=Wt,Sc=Vt,Ic=200;function xc(e,t){var n=this.__data__;if(n instanceof wc){var r=n.__data__;if(!$c||r.length<Ic-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sc(r)}return n.set(e,t),this.size=n.size,this}var Oc=xc,Ac=wt,Pc=po,kc=ho,Cc=_o,Tc=bo,Ec=Oc;function Ee(e){var t=this.__data__=new Ac(e);this.size=t.size}Ee.prototype.clear=Pc,Ee.prototype.delete=kc,Ee.prototype.get=Cc,Ee.prototype.has=Tc,Ee.prototype.set=Ec;var Qn=Ee,Dc="__lodash_hash_undefined__";function Nc(e){return this.__data__.set(e,Dc),this}var Mc=Nc;function jc(e){return this.__data__.has(e)}var Lc=jc,Rc=Vt,qc=Mc,Uc=Lc;function xt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Rc;++t<n;)this.add(e[t])}xt.prototype.add=xt.prototype.push=qc,xt.prototype.has=Uc;var er=xt;function Fc(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var zc=Fc;function Gc(e,t){return e.has(t)}var tr=Gc,Bc=er,Hc=zc,Kc=tr,Wc=1,Vc=2;function Jc(e,t,n,r,a,i){var o=n&Wc,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=i.get(e),l=i.get(t);if(u&&l)return u==t&&l==e;var d=-1,m=!0,g=n&Vc?new Bc:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var _=e[d],y=t[d];if(r)var v=o?r(y,_,d,t,e,i):r(_,y,d,e,t,i);if(v!==void 0){if(v)continue;m=!1;break}if(g){if(!Hc(t,function(w,$){if(!Kc(g,$)&&(_===w||a(_,w,n,r,i)))return g.push($)})){m=!1;break}}else if(!(_===y||a(_,y,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var nr=Jc,Xc=ae,Zc=Xc.Uint8Array,Yc=Zc;function Qc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var eu=Qc;function tu(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Jt=tu,rr=$t,ar=Yc,nu=Ht,ru=nr,au=eu,iu=Jt,ou=1,su=2,cu="[object Boolean]",uu="[object Date]",lu="[object Error]",du="[object Map]",fu="[object Number]",mu="[object RegExp]",pu="[object Set]",gu="[object String]",hu="[object Symbol]",yu="[object ArrayBuffer]",_u="[object DataView]",ir=rr?rr.prototype:void 0,Xt=ir?ir.valueOf:void 0;function vu(e,t,n,r,a,i,o){switch(n){case _u:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case yu:return!(e.byteLength!=t.byteLength||!i(new ar(e),new ar(t)));case cu:case uu:case fu:return nu(+e,+t);case lu:return e.name==t.name&&e.message==t.message;case mu:case gu:return e==t+"";case du:var s=au;case pu:var c=r&ou;if(s||(s=iu),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=su,o.set(e,t);var l=ru(s(e),s(t),r,a,i,o);return o.delete(e),l;case hu:if(Xt)return Xt.call(e)==Xt.call(t)}return!1}var bu=vu;function wu(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var or=wu,$u=or,Su=te;function Iu(e,t,n){var r=t(e);return Su(e)?r:$u(r,n(e))}var sr=Iu;function xu(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Ou=xu;function Au(){return[]}var cr=Au,Pu=Ou,ku=cr,Cu=Object.prototype,Tu=Cu.propertyIsEnumerable,ur=Object.getOwnPropertySymbols,Eu=ur?function(e){return e==null?[]:(e=Object(e),Pu(ur(e),function(t){return Tu.call(e,t)}))}:ku,lr=Eu;function Du(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Nu=Du;function Mu(e){return e!=null&&typeof e=="object"}var et=Mu,ju=Qe,Lu=et,Ru="[object Arguments]";function qu(e){return Lu(e)&&ju(e)==Ru}var Uu=qu,dr=Uu,Fu=et,fr=Object.prototype,zu=fr.hasOwnProperty,Gu=fr.propertyIsEnumerable,Bu=dr(function(){return arguments}())?dr:function(e){return Fu(e)&&zu.call(e,"callee")&&!Gu.call(e,"callee")},Zt=Bu,tt={exports:{}};function Hu(){return!1}var Ku=Hu;(function(e,t){var n=ae,r=Ku,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?n.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||r;e.exports=u})(tt,tt.exports);var Wu=9007199254740991,Vu=/^(?:0|[1-9]\d*)$/;function Ju(e,t){var n=typeof e;return t=t==null?Wu:t,!!t&&(n=="number"||n!="symbol"&&Vu.test(e))&&e>-1&&e%1==0&&e<t}var Yt=Ju,Xu=9007199254740991;function Zu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xu}var Qt=Zu,Yu=Qe,Qu=Qt,el=et,tl="[object Arguments]",nl="[object Array]",rl="[object Boolean]",al="[object Date]",il="[object Error]",ol="[object Function]",sl="[object Map]",cl="[object Number]",ul="[object Object]",ll="[object RegExp]",dl="[object Set]",fl="[object String]",ml="[object WeakMap]",pl="[object ArrayBuffer]",gl="[object DataView]",hl="[object Float32Array]",yl="[object Float64Array]",_l="[object Int8Array]",vl="[object Int16Array]",bl="[object Int32Array]",wl="[object Uint8Array]",$l="[object Uint8ClampedArray]",Sl="[object Uint16Array]",Il="[object Uint32Array]",L={};L[hl]=L[yl]=L[_l]=L[vl]=L[bl]=L[wl]=L[$l]=L[Sl]=L[Il]=!0,L[tl]=L[nl]=L[pl]=L[rl]=L[gl]=L[al]=L[il]=L[ol]=L[sl]=L[cl]=L[ul]=L[ll]=L[dl]=L[fl]=L[ml]=!1;function xl(e){return el(e)&&Qu(e.length)&&!!L[Yu(e)]}var Ol=xl;function Al(e){return function(t){return e(t)}}var Pl=Al,en={exports:{}};(function(e,t){var n=Gn,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(en,en.exports);var kl=Ol,Cl=Pl,mr=en.exports,pr=mr&&mr.isTypedArray,Tl=pr?Cl(pr):kl,tn=Tl,El=Nu,Dl=Zt,Nl=te,Ml=tt.exports,jl=Yt,Ll=tn,Rl=Object.prototype,ql=Rl.hasOwnProperty;function Ul(e,t){var n=Nl(e),r=!n&&Dl(e),a=!n&&!r&&Ml(e),i=!n&&!r&&!a&&Ll(e),o=n||r||a||i,s=o?El(e.length,String):[],c=s.length;for(var u in e)(t||ql.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jl(u,c)))&&s.push(u);return s}var gr=Ul,Fl=Object.prototype;function zl(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fl;return e===n}var nn=zl;function Gl(e,t){return function(n){return e(t(n))}}var hr=Gl,Bl=hr,Hl=Bl(Object.keys,Object),Kl=Hl,Wl=nn,Vl=Kl,Jl=Object.prototype,Xl=Jl.hasOwnProperty;function Zl(e){if(!Wl(e))return Vl(e);var t=[];for(var n in Object(e))Xl.call(e,n)&&n!="constructor"&&t.push(n);return t}var yr=Zl,Yl=Vn,Ql=Qt;function ed(e){return e!=null&&Ql(e.length)&&!Yl(e)}var De=ed,td=gr,nd=yr,rd=De;function ad(e){return rd(e)?td(e):nd(e)}var Ot=ad,id=sr,od=lr,sd=Ot;function cd(e){return id(e,sd,od)}var ud=cd,_r=ud,ld=1,dd=Object.prototype,fd=dd.hasOwnProperty;function md(e,t,n,r,a,i){var o=n&ld,s=_r(e),c=s.length,u=_r(t),l=u.length;if(c!=l&&!o)return!1;for(var d=c;d--;){var m=s[d];if(!(o?m in t:fd.call(t,m)))return!1}var g=i.get(e),_=i.get(t);if(g&&_)return g==t&&_==e;var y=!0;i.set(e,t),i.set(t,e);for(var v=o;++d<c;){m=s[d];var w=e[m],$=t[m];if(r)var P=o?r($,w,m,t,e,i):r(w,$,m,e,t,i);if(!(P===void 0?w===$||a(w,$,n,r,i):P)){y=!1;break}v||(v=m=="constructor")}if(y&&!v){var h=e.constructor,O=t.constructor;h!=O&&"constructor"in e&&"constructor"in t&&!(typeof h=="function"&&h instanceof h&&typeof O=="function"&&O instanceof O)&&(y=!1)}return i.delete(e),i.delete(t),y}var pd=md,gd=he,hd=ae,yd=gd(hd,"DataView"),_d=yd,vd=he,bd=ae,wd=vd(bd,"Promise"),$d=wd,Sd=he,Id=ae,xd=Sd(Id,"Set"),vr=xd,Od=he,Ad=ae,Pd=Od(Ad,"WeakMap"),kd=Pd,rn=_d,an=Wt,on=$d,sn=vr,cn=kd,br=Qe,Ne=Xn,wr="[object Map]",Cd="[object Object]",$r="[object Promise]",Sr="[object Set]",Ir="[object WeakMap]",xr="[object DataView]",Td=Ne(rn),Ed=Ne(an),Dd=Ne(on),Nd=Ne(sn),Md=Ne(cn),ye=br;(rn&&ye(new rn(new ArrayBuffer(1)))!=xr||an&&ye(new an)!=wr||on&&ye(on.resolve())!=$r||sn&&ye(new sn)!=Sr||cn&&ye(new cn)!=Ir)&&(ye=function(e){var t=br(e),n=t==Cd?e.constructor:void 0,r=n?Ne(n):"";if(r)switch(r){case Td:return xr;case Ed:return wr;case Dd:return $r;case Nd:return Sr;case Md:return Ir}return t});var Or=ye,un=Qn,jd=nr,Ld=bu,Rd=pd,Ar=Or,Pr=te,kr=tt.exports,qd=tn,Ud=1,Cr="[object Arguments]",Tr="[object Array]",At="[object Object]",Fd=Object.prototype,Er=Fd.hasOwnProperty;function zd(e,t,n,r,a,i){var o=Pr(e),s=Pr(t),c=o?Tr:Ar(e),u=s?Tr:Ar(t);c=c==Cr?At:c,u=u==Cr?At:u;var l=c==At,d=u==At,m=c==u;if(m&&kr(e)){if(!kr(t))return!1;o=!0,l=!1}if(m&&!l)return i||(i=new un),o||qd(e)?jd(e,t,n,r,a,i):Ld(e,t,c,n,r,a,i);if(!(n&Ud)){var g=l&&Er.call(e,"__wrapped__"),_=d&&Er.call(t,"__wrapped__");if(g||_){var y=g?e.value():e,v=_?t.value():t;return i||(i=new un),a(y,v,n,r,i)}}return m?(i||(i=new un),Rd(e,t,n,r,a,i)):!1}var Gd=zd,Bd=Gd,Dr=et;function Nr(e,t,n,r,a){return e===t?!0:e==null||t==null||!Dr(e)&&!Dr(t)?e!==e&&t!==t:Bd(e,t,n,r,Nr,a)}var Mr=Nr,Hd=function(t){return t===void 0&&(t={}),{arrayFormat:t.arrayFormat||"none",booleanFormat:t.booleanFormat||"none",nullFormat:t.nullFormat||"default"}},jr=function(t){return decodeURIComponent(t.replace(/\+/g," "))},Kd=function(t,n){if(t===void 0)return n.booleanFormat==="empty-true"?!0:null;if(n.booleanFormat==="string"){if(t==="true")return!0;if(t==="false")return!1}if(n.nullFormat==="string"&&t==="null")return null;var r=jr(t);if(n.booleanFormat==="unicode"){if(r==="\u2713")return!0;if(r==="\u2717")return!1}return r},Wd=function(t){var n=t.indexOf("?");return n===-1?t:t.slice(n+1)},Vd=function(t){var n=t.indexOf("["),r=n!==-1;return{hasBrackets:r,name:r?t.slice(0,n):t}},Me=function(t,n){var r=Hd(n);return Wd(t).split("&").reduce(function(a,i){var o=i.split("="),s=o[0],c=o[1],u=Vd(s),l=u.hasBrackets,d=u.name,m=jr(d),g=a[d],_=Kd(c,r);return g===void 0?a[m]=l?[_]:_:a[m]=(Array.isArray(g)?g:[g]).concat(_),a},{})},Jd=Qn,Xd=Mr,Zd=1,Yd=2;function Qd(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var s=n[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=n[a];var c=s[0],u=e[c],l=s[1];if(o&&s[2]){if(u===void 0&&!(c in e))return!1}else{var d=new Jd;if(r)var m=r(u,l,c,e,t,d);if(!(m===void 0?Xd(l,u,Zd|Yd,r,d):m))return!1}}return!0}var ef=Qd,tf=ke;function nf(e){return e===e&&!tf(e)}var Lr=nf,rf=Lr,af=Ot;function of(e){for(var t=af(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,rf(a)]}return t}var sf=of;function cf(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Rr=cf,uf=ef,lf=sf,df=Rr;function ff(e){var t=lf(e);return t.length==1&&t[0][2]?df(t[0][0],t[0][1]):function(n){return n===e||uf(n,e,t)}}var mf=ff,pf=Qe,gf=et,hf="[object Symbol]";function yf(e){return typeof e=="symbol"||gf(e)&&pf(e)==hf}var Pt=yf,_f=te,vf=Pt,bf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wf=/^\w*$/;function $f(e,t){if(_f(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||vf(e)?!0:wf.test(e)||!bf.test(e)||t!=null&&e in Object(t)}var ln=$f,qr=Vt,Sf="Expected a function";function dn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Sf);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(dn.Cache||qr),n}dn.Cache=qr;var If=dn,xf=If,Of=500;function Af(e){var t=xf(e,function(r){return n.size===Of&&n.clear(),r}),n=t.cache;return t}var Pf=Af,kf=Pf,Cf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tf=/\\(\\)?/g,Ef=kf(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cf,function(n,r,a,i){t.push(a?i.replace(Tf,"$1"):r||n)}),t}),Df=Ef;function Nf(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var fn=Nf,Ur=$t,Mf=fn,jf=te,Lf=Pt,Rf=1/0,Fr=Ur?Ur.prototype:void 0,zr=Fr?Fr.toString:void 0;function Gr(e){if(typeof e=="string")return e;if(jf(e))return Mf(e,Gr)+"";if(Lf(e))return zr?zr.call(e):"";var t=e+"";return t=="0"&&1/e==-Rf?"-0":t}var qf=Gr,Uf=qf;function Ff(e){return e==null?"":Uf(e)}var mn=Ff,zf=te,Gf=ln,Bf=Df,Hf=mn;function Kf(e,t){return zf(e)?e:Gf(e,t)?[e]:Bf(Hf(e))}var kt=Kf,Wf=Pt,Vf=1/0;function Jf(e){if(typeof e=="string"||Wf(e))return e;var t=e+"";return t=="0"&&1/e==-Vf?"-0":t}var nt=Jf,Xf=kt,Zf=nt;function Yf(e,t){t=Xf(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Zf(t[n++])];return n&&n==r?e:void 0}var pn=Yf,Qf=pn;function em(e,t,n){var r=e==null?void 0:Qf(e,t);return r===void 0?n:r}var F=em;function tm(e,t){return e!=null&&t in Object(e)}var nm=tm,rm=kt,am=Zt,im=te,om=Yt,sm=Qt,cm=nt;function um(e,t,n){t=rm(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=cm(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&sm(a)&&om(o,a)&&(im(e)||am(e)))}var lm=um,dm=nm,fm=lm;function mm(e,t){return e!=null&&fm(e,t,dm)}var pm=mm,gm=Mr,hm=F,ym=pm,_m=ln,vm=Lr,bm=Rr,wm=nt,$m=1,Sm=2;function Im(e,t){return _m(e)&&vm(t)?bm(wm(e),t):function(n){var r=hm(n,e);return r===void 0&&r===t?ym(n,e):gm(t,r,$m|Sm)}}var xm=Im;function Om(e){return e}var Am=Om;function Pm(e){return function(t){return t==null?void 0:t[e]}}var km=Pm,Cm=pn;function Tm(e){return function(t){return Cm(t,e)}}var Em=Tm,Dm=km,Nm=Em,Mm=ln,jm=nt;function Lm(e){return Mm(e)?Dm(jm(e)):Nm(e)}var Rm=Lm,qm=mf,Um=xm,Fm=Am,zm=te,Gm=Rm;function Bm(e){return typeof e=="function"?e:e==null?Fm:typeof e=="object"?zm(e)?Um(e[0],e[1]):qm(e):Gm(e)}var je=Bm,Hm=je,Km=De,Wm=Ot;function Vm(e){return function(t,n,r){var a=Object(t);if(!Km(t)){var i=Hm(n);t=Wm(t),n=function(s){return i(a[s],s,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var Jm=Vm;function Xm(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Br=Xm,Zm=/\s/;function Ym(e){for(var t=e.length;t--&&Zm.test(e.charAt(t)););return t}var Qm=Ym,ep=Qm,tp=/^\s+/;function np(e){return e&&e.slice(0,ep(e)+1).replace(tp,"")}var rp=np,ap=rp,Hr=ke,ip=Pt,Kr=0/0,op=/^[-+]0x[0-9a-f]+$/i,sp=/^0b[01]+$/i,cp=/^0o[0-7]+$/i,up=parseInt;function lp(e){if(typeof e=="number")return e;if(ip(e))return Kr;if(Hr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Hr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ap(e);var n=sp.test(e);return n||cp.test(e)?up(e.slice(2),n?2:8):op.test(e)?Kr:+e}var dp=lp,fp=dp,Wr=1/0,mp=17976931348623157e292;function pp(e){if(!e)return e===0?e:0;if(e=fp(e),e===Wr||e===-Wr){var t=e<0?-1:1;return t*mp}return e===e?e:0}var gp=pp,hp=gp;function yp(e){var t=hp(e),n=t%1;return t===t?n?t-n:t:0}var _p=yp,vp=Br,bp=je,wp=_p,$p=Math.max;function Sp(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:wp(n);return a<0&&(a=$p(r+a,0)),vp(e,bp(t),a)}var Ip=Sp,xp=Jm,Op=Ip,Ap=xp(Op),Ct=Ap;function Pp(e,t,n,r){var a=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}var kp=Pp;function Cp(e){return function(t){return e==null?void 0:e[t]}}var Tp=Cp,Ep=Tp,Dp={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Np=Ep(Dp),Mp=Np,jp=Mp,Lp=mn,Rp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qp="\\u0300-\\u036f",Up="\\ufe20-\\ufe2f",Fp="\\u20d0-\\u20ff",zp=qp+Up+Fp,Gp="["+zp+"]",Bp=RegExp(Gp,"g");function Hp(e){return e=Lp(e),e&&e.replace(Rp,jp).replace(Bp,"")}var Kp=Hp,Wp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Vp(e){return e.match(Wp)||[]}var Jp=Vp,Xp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Zp(e){return Xp.test(e)}var Yp=Zp,Vr="\\ud800-\\udfff",Qp="\\u0300-\\u036f",eg="\\ufe20-\\ufe2f",tg="\\u20d0-\\u20ff",ng=Qp+eg+tg,Jr="\\u2700-\\u27bf",Xr="a-z\\xdf-\\xf6\\xf8-\\xff",rg="\\xac\\xb1\\xd7\\xf7",ag="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ig="\\u2000-\\u206f",og=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zr="A-Z\\xc0-\\xd6\\xd8-\\xde",sg="\\ufe0e\\ufe0f",Yr=rg+ag+ig+og,Qr="['\u2019]",ea="["+Yr+"]",cg="["+ng+"]",ta="\\d+",ug="["+Jr+"]",na="["+Xr+"]",ra="[^"+Vr+Yr+ta+Jr+Xr+Zr+"]",lg="\\ud83c[\\udffb-\\udfff]",dg="(?:"+cg+"|"+lg+")",fg="[^"+Vr+"]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",ia="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Zr+"]",mg="\\u200d",oa="(?:"+na+"|"+ra+")",pg="(?:"+Le+"|"+ra+")",sa="(?:"+Qr+"(?:d|ll|m|re|s|t|ve))?",ca="(?:"+Qr+"(?:D|LL|M|RE|S|T|VE))?",ua=dg+"?",la="["+sg+"]?",gg="(?:"+mg+"(?:"+[fg,aa,ia].join("|")+")"+la+ua+")*",hg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_g=la+ua+gg,vg="(?:"+[ug,aa,ia].join("|")+")"+_g,bg=RegExp([Le+"?"+na+"+"+sa+"(?="+[ea,Le,"$"].join("|")+")",pg+"+"+ca+"(?="+[ea,Le+oa,"$"].join("|")+")",Le+"?"+oa+"+"+sa,Le+"+"+ca,yg,hg,ta,vg].join("|"),"g");function wg(e){return e.match(bg)||[]}var $g=wg,Sg=Jp,Ig=Yp,xg=mn,Og=$g;function Ag(e,t,n){return e=xg(e),t=n?void 0:t,t===void 0?Ig(e)?Og(e):Sg(e):e.match(t)||[]}var Pg=Ag,kg=kp,Cg=Kp,Tg=Pg,Eg="['\u2019]",Dg=RegExp(Eg,"g");function Ng(e){return function(t){return kg(Tg(Cg(t).replace(Dg,"")),e,"")}}var Mg=Ng,jg=Mg,Lg=jg(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Re=Lg;const rt=(e,t,n=1)=>{const{title:r,product_type:a,vendor:i,id:o,variants:s}=e,c=t?Ct(s,{id:t}):s[0],{price:u,sku:l,title:d,id:m}=c;return{item_id:m,item_name:r,affiliation:"Shopify Store",currency:da(),item_brand:i,item_category:a,item_variant:d,item_product_id:o,price:Number(u),quantity:n,sku:l}};async function qe(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return[...new Uint8Array(n)].map(a=>a.toString(16).padStart(2,"0")).join("")}function Rg(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++a];if(n(i[c],c,i)===!1)break}return t}}var qg=Rg,Ug=qg,Fg=Ug(),zg=Fg,Gg=zg,Bg=Ot;function Hg(e,t){return e&&Gg(e,t,Bg)}var Kg=Hg,Wg=hr,Vg=Wg(Object.getPrototypeOf,Object),Jg=Vg;const da=()=>{var e,t,n,r;return((t=(e=window==null?void 0:window.Shopify)==null?void 0:e.currency)==null?void 0:t.active)||((r=(n=window.slideruleData)==null?void 0:n.ecommerce)==null?void 0:r.currencyCode)},S=(e,t)=>{t&&console.log(`SlideRule Analytics: ${e}`)},gn=async(e,t,n)=>{const r=await ut(t.handle),a=rt(r,t.id,t.quantity),i=e==="remove_from_cart"?-1:1;return window.slideruleData.analytics.track(e,{ecommerce_event:!0,currency:a.currency,value:i*a.price*t.quantity,items:[a],cart_token:n}),r},fa=async()=>{const e=await de();return window.slideruleData.cart=e,e},Ue=(e,t,n)=>{var r="";if(n){var a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"},_e=e=>{for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),a,i=0;i<r.length;i++){for(var o=r[i];o.charAt(0)==" ";)o=o.substring(1,o.length);o.indexOf(t)==0&&(a=o.substring(t.length,o.length))}return a},Xg=e=>{document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},Zg=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)),Yg=async()=>{try{const e=_e("_sra_ip");if(e)return e;let n=await(await fetch("https://www.cloudflare.com/cdn-cgi/trace")).text();return n=n.trim().split(`
`).reduce(function(r,a){return a=a.split("="),r[a[0]]=a[1],r},{}),Ue("_sra_ip",n.ip,.0208333),n.ip}catch(e){console.log(`SlideRule Analytics: get ip address failed. ${e}`)}},ma=(e,t)=>{X(e,t,{storage:"localStorage"}),X(e,t,{storage:"cookie"}),X(e,t,{storage:"sessionStorage"}),X(e,t,{storage:"global"})},hn=(e,t)=>{let n=Me(window.location.href)[e];return n?ma(t,n):n=ee(t),n},Qg=e=>{const t=Me(e).variant;return t?Number(t):void 0},yn=async(e,t=[],n=!1)=>{const r=["email","phone_number","first_name","last_name","name","default_address","addresses_count","current_location","addresses","address","address1","address2","ip_address","phone"];n||r.push("email_sha256","phone_sha256");const a=[...r,...t],i={},o=[];for(const s in e)if(a.includes(s)){if(n){const c=e[s],u=qe(c).then(l=>{i[`${s}_sha256`]=l});o.push(u)}}else i[s]=e[s];return await Promise.all(o),i},_n=["klaviyo_meta_data"],pa=async(e,t)=>{var n=_e("_ga");if(n){var r=n.match(/GA\d+\.\d+\.(\d+\.\d+)/);if(r){const a=r[1];return S(`ga4 client found from cookie ${a}`,t),a}}if(window.gtag){const i=await new Promise(o=>{window.gtag("get",e,"client_id",o)}).then(o=>o);return S(`ga4 client found from gtag get ${i}`,t),i}else S("ERROR: gtag not loaded. No client ids saved",!0)};function eh(e){var t=/GS1\.1\.(\d+)\./,n=e.match(t);return n&&n[1]?n[1]:null}const ga=async(e,t)=>{var n=_e(`_ga_${e.substring(2)}`);let r=n?eh(n):null;if(r)return S(`ga4 session id for ${e} found from cookie ${r}`,t),r;if(window.gtag)return r=await new Promise(i=>{window.gtag("get",e,"session_id",i)}).then(i=>i),S(`ga4 session id for ${e} found from gtag get ${r}`,t),r;S("ERROR: gtag not loaded. No client ids saved",!0)},th=async(e,t,n)=>{t.google_analytics_4=[];const r=await pa(e.google_analytics_4.measurementIds[0],n);for await(const a of e.google_analytics_4.measurementIds){const i=await ga(a,n);t.google_analytics_4.push({measurement_id:a,client_id:r,session_id:i})}return t},nh=async(e,t,n,r)=>{var m,g;const a=F(e,"meta_pixel.pixelIds");t.meta_pixel=[];let i=_e("_fbp"),o=_e("_fbc");const s=await Yg(),c=window.navigator.userAgent;if(i||(S("meta _fbp cookie not found. autogenerating.",r),i=`fb.1.${Date.now()}.${Zg(100,1e9)}`,Ue("_fbp",i,180)),!o&&window.location.search.includes("fbclid=")){S("meta _fbc cookie not found. autogenerating using fbclid.",r);const _=Me(window.location.href).fbclid;o=`fb.1.${Date.now()}.${_}`,Ue("_fbc",o,180)}const u=(g=(m=window==null?void 0:window.slideruleData)==null?void 0:m.analytics)==null?void 0:g.user(),l=F(u,"userId"),d=F(u,"anonymousId");return a.forEach(_=>{t.meta_pixel.push({pixel_id:_,fbp:i,fbc:o,user_id:n||l,anonymous_id:d,ia:s,ua:c})}),t},rh=(e,t,n)=>{var i;const r=hn("ranMID","_sra_ranMID"),a=(i=e==null?void 0:e.rakuten)==null?void 0:i.merchantIds.map(o=>o);if(a!=null&&a.includes(r)){let o=ee("_sra_ranTimeEntered");Me(window.location.href).ranSiteID&&Me(window.location.href).ranSiteID!==ee("_sra_ranSiteID")&&(S("ranSiteID changed. updating time entered.",n),o=new Date().toISOString(),ma("_sra_ranTimeEntered",o));const s=hn("ranSiteID","_sra_ranSiteID"),c=hn("ranMID","_sra_ranEAID");s&&(t.rakuten=[],t.rakuten.push({site_id:s,merchant_id:r,publishers_encrypted_id:c,time_entered:o}))}return t},ah=e=>{let t,n;const r=ee("landingUrlParams"),a=ee("landingReferrer");if(r)t=r;else{const i=window.location.search;i?(X("landingUrlParams",i),t=i):(X("landingUrlParams","no params"),t="no params")}if(a)n=a;else{const i=document.referrer;i?(X("landingReferrer",i),n=i):(X("landingReferrer","no referrer"),n="no referrer")}return e.general.landing_url_params=t,e.general.landing_referrer=n,e},ih=async(e,t)=>{const n=await de(),{attributes:r}=n,a=JSON.stringify(e);if(r.sra_identifiers===a&&r.sra_debug===JSON.stringify(t))return n;const o={attributes:{...r,sra_identifiers:a,sra_debug:t}},s=await Dn(o);return S("updated cart with tracking ids.",t),s},oh=async e=>{var i,o;const t=await de();if(ee("sra_cart_token")===t.token||((o=(i=window==null?void 0:window.slideruleData)==null?void 0:i.configurationOptions)==null?void 0:o.avoidRaceWithLittelData))return S("cart id already set.",e),t;const a=await Dn({});return S("set cart id.",e),a},sh=async(e,t,n)=>{const r=e,a=ee("sra_cart_token"),i=ee("sra_identifiers"),o=ee("sra_debug");if(JSON.stringify(i)===JSON.stringify(r)&&o===t&&a===n){S("sra_identifiers found in session storage. Skipping Redis update.",t);return}const c={cart_token:n,identifiers:r};let u;try{return u=await await fetch("https://api.slideruletools.com/v1/identifiers",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}),u.status===200&&(S("sra_identifiers saved to redis.",t),X("sra_cart_token",n,{storage:"sessionStorage"}),X("sra_identifiers",r,{storage:"sessionStorage"}),X("sra_debug",t,{storage:"sessionStorage"}),S("sra_identifiers saved to session storage.",t)),u}catch(l){console.log(`SlideRule Analytics: update redis attributes failed. ${l}.`)}return u},ch=async(e,t,n)=>{var i,o,s,c,u;let r;const a=(i=window==null?void 0:window.Shopify)==null?void 0:i.shop;if((s=(o=window==null?void 0:window.slideruleData)==null?void 0:o.configurationOptions)!=null&&s.isServerSideTracking){n||((u=(c=window==null?void 0:window.slideruleData)==null?void 0:c.configurationOptions)==null?void 0:u.disableCartAttributes)?n?(r=await de(),S("skipping cart update because skipCart is true",t)):(S(`skipping cart update for ${a}`,t),r=await oh(t)):r=await ih(e,t);const l=r.token;await sh(e,t,l),window.slideruleData.cart=r}},at=async(e,t,n,r)=>{var l,d,m,g,_;const a=(l=window==null?void 0:window.slideruleData)==null?void 0:l.customer,o=((m=(d=window.slideruleData)==null?void 0:d.shopifyLiquidData)==null?void 0:m.customer)||a,{id:s,...c}=o||{};S("handling identifiers here.",n);let u={};if(u.general={},e.google_analytics_4&&t&&(u=await th(e,u,n),S("received ga4 indentifies.",n)),e.meta_pixel&&(u=await nh(e,u,s,n),S("received meta pixels indentifies.",n)),e.rakuten&&(u=await rh(e,u,n),u.rakuten&&S("received rakuten indentifies.",n)),(_=(g=window==null?void 0:window.slideruleData)==null?void 0:g.configurationOptions)!=null&&_.saveLandingPageUrlParamsToCart&&(u=ah(u),S("received landing page parameters.",n)),t||(S("analytics_consent_granted set to false. Saving consent status.",n),u.general.analytics_consent_granted=!1),(u.google_analytics_4||u.meta_pixel||u.general||u.rakuten)&&await ch(u,n,r),t){const y=F(u,"google_analytics_4[0].client_id"),v=F(u,"meta_pixel[0].fbp"),w=F(u,"meta_pixel[0].fbc");s?(window.slideruleData.analytics.identify(s,{custom_client_id:y?`${y}.`:void 0,meta_pixel_fbp:v,meta_pixel_fbc:w,...c}),S(`identifiers found for customer ${s}. ${JSON.stringify(u)}`,n)):(window.slideruleData.analytics.identify({custom_client_id:`${y}.`,meta_pixel_fbp:v,meta_pixel_fbc:w}),S(`identifiers found ${JSON.stringify(u)}`,n))}};function ha(e,t,n,r,a){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:a;return e===a?n:e}function ya(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function uh(){if(Q){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function lh(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function dh(e){return function(t){for(var n,r=Object.create(null),a=/([^&=]+)=?([^&]*)/g;n=a.exec(t);){var i=ya(n[1]),o=ya(n[2]);i.substring(i.length-2)==="[]"?(r[i=i.substring(0,i.length-2)]||(r[i]=[])).push(o):r[i]=o===""||o}for(var s in r){var c=s.split("[");c.length>1&&(fh(r,c.map(function(u){return u.replace(/[?[\]\\ ]/g,"")}),r[s]),delete r[s])}return r}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return Q&&window.location.search.substring(1)}(e))}function fh(e,t,n){for(var r=t.length-1,a=0;a<r;++a){var i=t[a];if(i==="__proto__"||i==="constructor")break;i in e||(e[i]={}),e=e[i]}e[t[r]]=n}function Tt(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],a=15&n;e+=r=="-"||r=="4"?r:(r=="x"?a:3&a|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}var se="function",ie="undefined",mh="@@redux/"+Math.random().toString(36),_a=function(){return typeof Symbol===se&&Symbol.observable||"@@observable"}(),Et=" != "+se;function va(e,t,n){var r;if(typeof t===se&&typeof n===ie&&(n=t,t=void 0),typeof n!==ie){if(typeof n!==se)throw new Error("enhancer"+Et);return n(va)(e,t)}if(typeof e!==se)throw new Error("reducer"+Et);var a=e,i=t,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function l(){return i}function d(g){if(typeof g!==se)throw new Error("Listener"+Et);var _=!0;return u(),s.push(g),function(){if(_){_=!1,u();var y=s.indexOf(g);s.splice(y,1)}}}function m(g){if(!J(g))throw new Error("Act != obj");if(typeof g.type===ie)throw new Error("ActType "+ie);if(c)throw new Error("Dispatch in reducer");try{c=!0,i=a(i,g)}finally{c=!1}for(var _=o=s,y=0;y<_.length;y++)(0,_[y])();return g}return m({type:"@@redux/INIT"}),(r={dispatch:m,subscribe:d,getState:l,replaceReducer:function(g){if(typeof g!==se)throw new Error("next reducer"+Et);a=g,m({type:"@@redux/INIT"})}})[_a]=function(){var g,_=d;return(g={subscribe:function(y){if(typeof y!="object")throw new TypeError("Observer != obj");function v(){y.next&&y.next(l())}return v(),{unsubscribe:_(v)}}})[_a]=function(){return this},g},r}function ph(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+ie}function Fe(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function gh(){var e=arguments;return function(t){return function(n,r,a){var i,o=t(n,r,a),s=o.dispatch,c={getState:o.getState,dispatch:function(u){return s(u)}};return i=[].slice.call(e).map(function(u){return u(c)}),I({},o,{dispatch:s=Fe.apply(void 0,i)(o.dispatch)})}}}var ce=fe+"anon_id",ve=fe+"user_id",ze=fe+"user_traits",ue="userId",Ge="anonymousId",Dt=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],vn=["name","EVENTS","config","loaded"],x=Dt.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),ba=/^utm_/,wa=/^an_prop_/,$a=/^an_trait_/;function hh(e){var t=e.storage.setItem;return function(n){return function(r){return function(a){if(a.type===x.bootstrap){var i=a.params,o=a.user,s=a.persistedUser,c=a.initialUser,u=s.userId===o.userId;s.anonymousId!==o.anonymousId&&t(ce,o.anonymousId),u||t(ve,o.userId),c.traits&&t(ze,I({},u&&s.traits?s.traits:{},c.traits));var l=Object.keys(a.params);if(l.length){var d=i.an_uid,m=i.an_event,g=l.reduce(function(_,y){if(y.match(ba)||y.match(/^(d|g)clid/)){var v=y.replace(ba,"");_.campaign[v==="campaign"?"name":v]=i[y]}return y.match(wa)&&(_.props[y.replace(wa,"")]=i[y]),y.match($a)&&(_.traits[y.replace($a,"")]=i[y]),_},{campaign:{},props:{},traits:{}});n.dispatch(I({type:x.params,raw:i},g,d?{userId:d}:{})),d&&setTimeout(function(){return e.identify(d,g.traits)},0),m&&setTimeout(function(){return e.track(m,g.props)},0),Object.keys(g.campaign).length&&n.dispatch({type:x.campaign,campaign:g.campaign})}}return r(a)}}}}function yh(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===x.setItemEnd){if(n.key===ce)return I({},t,{anonymousId:n.value});if(n.key===ve)return I({},t,{userId:n.value})}switch(n.type){case x.identify:return Object.assign({},t,{userId:n.userId,traits:I({},t.traits,n.traits)});case x.reset:return[ve,ce,ze].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function Sa(e){return{userId:e.getItem(ve),anonymousId:e.getItem(ce),traits:e.getItem(ze)}}var bn=function(e){return fe+"TEMP"+fe+e};function _h(e){var t=e.storage,n=t.setItem,r=t.removeItem,a=t.getItem;return function(i){return function(o){return function(s){var c=s.userId,u=s.traits,l=s.options;if(s.type===x.reset&&([ve,ze,ce].forEach(function(g){r(g)}),[ue,Ge,"traits"].forEach(function(g){xe(bn(g))})),s.type===x.identify){a(ce)||n(ce,Tt());var d=a(ve),m=a(ze)||{};d&&d!==c&&i.dispatch({type:x.userIdChanged,old:{userId:d,traits:m},new:{userId:c,traits:u},options:l}),c&&n(ve,c),u&&n(ze,I({},m,u))}return o(s)}}}}var it={};function Ia(e,t){it[e]&&ne(it[e])&&(it[e](t),delete it[e])}function xa(e,t,n){return new Promise(function(r,a){return t()?r(e):n<1?a(I({},e,{queue:!0})):new Promise(function(i){return setTimeout(i,10)}).then(function(i){return xa(e,t,n-10).then(r,a)})})}function Oa(e,t,n){var r=t(),a=e.getState(),i=a.plugins,o=a.queue,s=a.user;if(!a.context.offline&&o&&o.actions&&o.actions.length){var c=o.actions.reduce(function(l,d,m){return i[d.plugin].loaded?(l.process.push(d),l.processIndex.push(m)):(l.requeue.push(d),l.requeueIndex.push(m)),l},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(c.processIndex&&c.processIndex.length){c.processIndex.forEach(function(l){var d=o.actions[l],m=d.plugin,g=d.payload.type,_=r[m][g];if(_&&ne(_)){var y=function(w,$){return w===void 0&&(w={}),$===void 0&&($={}),[ue,Ge].reduce(function(P,h){return w.hasOwnProperty(h)&&$[h]&&$[h]!==w[h]&&(P[h]=$[h]),P},w)}(d.payload,s);_({payload:y,config:i[m].config,instance:n});var v=g+":"+m;e.dispatch(I({},y,{type:v,_:{called:v,from:"queueDrain"}}))}});var u=o.actions.filter(function(l,d){return!~c.processIndex.indexOf(d)});o.actions=u}}}var wn=function(e){var t=e.data,n=e.action,r=e.instance,a=e.state,i=e.allPlugins,o=e.allMatches,s=e.store,c=e.EVENTS;try{var u=a.plugins,l=a.context,d=n.type,m=d.match(Be),g=t.exact.map(function(v){return v.pluginName});m&&(g=o.during.map(function(v){return v.pluginName}));var _=function(v,w){return function($,P,h){var O=P.config,R=P.name,M=R+"."+$.type;h&&(M=h.event);var j=$.type.match(Be)?function(z,q,H,U,K){return function(A,E){var Y=U?U.name:z,V=E&&ot(E)?E:H;if(U&&(!(V=E&&ot(E)?E:[z]).includes(z)||V.length!==1))throw new Error("Method "+q+" can only abort "+z+" plugin. "+JSON.stringify(V)+" input valid");return I({},K,{abort:{reason:A,plugins:V,caller:q,_:Y}})}}(R,M,w,h,$):function(z,q){return function(){throw new Error(z.type+" action not cancellable. Remove abort in "+q)}}($,M);return{payload:vh($),instance:v,config:O||{},abort:j}}}(r,g),y=t.exact.reduce(function(v,w){var $=w.pluginName,P=w.methodName,h=!1;return P.match(/^initialize/)||P.match(/^reset/)||(h=!u[$].loaded),l.offline&&P.match(/^(page|track|identify)/)&&(h=!0),v[""+$]=h,v},{});return Promise.resolve(t.exact.reduce(function(v,w,$){var P=w.pluginName;return Promise.resolve(v).then(function(h){function O(){return Promise.resolve(h)}var R=function(){if(t.namespaced&&t.namespaced[P])return Promise.resolve(t.namespaced[P].reduce(function(M,j,z){return Promise.resolve(M).then(function(q){return j.method&&ne(j.method)?(function(A,E){var Y=Na(A);if(Y&&Y.name===E){var V=Na(Y.method);throw new Error([E+" plugin is calling method "+A,"Plugins cant call self","Use "+Y.method+" "+(V?"or "+V.method:"")+" in "+E+" plugin insteadof "+A].join(`
`))}}(j.methodName,j.pluginName),Promise.resolve(j.method({payload:q,instance:r,abort:(H=q,U=P,K=j.pluginName,function(A,E){return I({},H,{abort:{reason:A,plugins:E||[U],caller:d,from:K||U}})}),config:ka(j.pluginName,u,i),plugins:u})).then(function(A){var E=J(A)?A:{};return Promise.resolve(I({},q,E))})):q;var H,U,K})},Promise.resolve(n))).then(function(M){h[P]=M});h[P]=n}();return R&&R.then?R.then(O):O()})},Promise.resolve({}))).then(function(v){return Promise.resolve(t.exact.reduce(function(w,$,P){try{var h=t.exact.length===P+1,O=$.pluginName,R=i[O];return Promise.resolve(w).then(function(M){var j=v[O]?v[O]:{};if(m&&(j=M),Sn(j,O))return $n({data:j,method:d,instance:r,pluginName:O,store:s}),Promise.resolve(M);if(Sn(M,O))return h&&$n({data:M,method:d,instance:r,store:s}),Promise.resolve(M);if(y.hasOwnProperty(O)&&y[O]===!0)return s.dispatch({type:"queue",plugin:O,payload:j,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(M);var z=_(v[O],i[O]);return Promise.resolve(R[d]({abort:z.abort,payload:j,instance:r,config:ka(O,u,i),plugins:u})).then(function(q){var H=J(q)?q:{},U=I({},M,H),K=v[O];if(Sn(K,O))$n({data:K,method:d,instance:r,pluginName:O,store:s});else{var A=d+":"+O;(A.match(/:/g)||[]).length<2&&!d.match(Aa)&&!d.match(Pa)&&r.dispatch(I({},m?U:j,{type:A,_:{called:A,from:"submethod"}}))}return Promise.resolve(U)})})}catch(M){return Promise.reject(M)}},Promise.resolve(n))).then(function(w){if(!(d.match(Be)||d.match(/^registerPlugin/)||d.match(Pa)||d.match(Aa)||d.match(/^params/)||d.match(/^userIdChanged/))){if(c.plugins.includes(d),w._&&w._.originalAction===d)return w;var $=I({},w,{_:{originalAction:w.type,called:w.type,from:"engineEnd"}});Ea(w,t.exact.length)&&!d.match(/End$/)&&($=I({},$,{type:w.type+"Aborted"})),s.dispatch($)}return w})})}catch(v){return Promise.reject(v)}},Be=/Start$/,Aa=/^bootstrap/,Pa=/^ready/;function $n(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(I({},e.data,{type:n,_:{called:n,from:"abort"}}))}function ka(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function Ca(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function Ta(e,t){var n=e.replace(Be,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function Sn(e,t){var n=e.abort;return!!n&&(n===!0||Da(n,t)||n&&Da(n.plugins,t))}function Ea(e,t){var n=e.abort;if(!n)return!1;if(n===!0||we(n))return!0;var r=n.plugins;return ot(n)&&n.length===t||ot(r)&&r.length===t}function ot(e){return Array.isArray(e)}function Da(e,t){return!(!e||!ot(e))&&e.includes(t)}function Na(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function vh(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=J(e[n])?Object.assign({},e[n]):e[n]),t},{})}function bh(e,t,n){var r={};return function(a){return function(i){return function(o){try{var s,c=function(h){return s?h:i(d)},u=o.type,l=o.plugins,d=o;if(o.abort)return Promise.resolve(i(o));if(u===x.enablePlugin&&a.dispatch({type:x.initializeStart,plugins:l,disabled:[],fromEnable:!0,meta:o.meta}),u===x.disablePlugin&&setTimeout(function(){return Ia(o.meta.rid,{payload:o})},0),u===x.initializeEnd){var m=t(),g=Object.keys(m),_=g.filter(function(h){return l.includes(h)}).map(function(h){return m[h]}),y=[],v=[],w=o.disabled,$=_.map(function(h){var O=h.name;return xa(h,h.loaded,1e4).then(function(R){return r[O]||(a.dispatch({type:x.pluginReadyType(O),name:O,events:Object.keys(h).filter(function(M){return!vn.includes(M)})}),r[O]=!0),y=y.concat(O),h}).catch(function(R){if(R instanceof Error)throw new Error(R);return v=v.concat(R.name),R})});Promise.all($).then(function(h){var O={plugins:y,failed:v,disabled:w};setTimeout(function(){g.length===$.length+w.length&&a.dispatch(I({},{type:x.ready},O))},0)})}var P=function(){if(u!==x.bootstrap)return/^ready:([^:]*)$/.test(u)&&setTimeout(function(){return Oa(a,t,e)},0),Promise.resolve(function(h,O,R,M,j){try{var z=ne(O)?O():O,q=h.type,H=q.replace(Be,"");if(h._&&h._.called)return Promise.resolve(h);var U=R.getState(),K=(Y=z,(V=U.plugins)===void 0&&(V={}),(p=h.options)===void 0&&(p={}),Object.keys(Y).filter(function(f){var b=p.plugins||{};return xi(b[f])?b[f]:b.all!==!1&&(!V[f]||V[f].enabled!==!1)}).map(function(f){return Y[f]}));q===x.initializeStart&&h.fromEnable&&(K=Object.keys(U.plugins).filter(function(f){var b=U.plugins[f];return h.plugins.includes(f)&&!b.initialized}).map(function(f){return z[f]}));var A=K.map(function(f){return f.name}),E=function(f,b,C){var T=Ta(f).map(function(k){return Ca(k,b)});return b.reduce(function(k,B){var D=B.name,G=Ta(f,D).map(function(Ke){return Ca(Ke,b)}),N=G[0],re=G[1],He=G[2];return N.length&&(k.beforeNS[D]=N),re.length&&(k.duringNS[D]=re),He.length&&(k.afterNS[D]=He),k},{before:T[0],beforeNS:{},during:T[1],duringNS:{},after:T[2],afterNS:{}})}(q,K);return Promise.resolve(wn({action:h,data:{exact:E.before,namespaced:E.beforeNS},state:U,allPlugins:z,allMatches:E,instance:R,store:M,EVENTS:j})).then(function(f){function b(){var k=function(){if(q.match(Be))return Promise.resolve(wn({action:I({},C,{type:H+"End"}),data:{exact:E.after,namespaced:E.afterNS},state:U,allPlugins:z,allMatches:E,instance:R,store:M,EVENTS:j})).then(function(B){B.meta&&B.meta.hasCallback&&Ia(B.meta.rid,{payload:B})})}();return k&&k.then?k.then(function(){return f}):f}if(Ea(f,A.length))return f;var C,T=function(){if(q!==H)return Promise.resolve(wn({action:I({},f,{type:H}),data:{exact:E.during,namespaced:E.duringNS},state:U,allPlugins:z,allMatches:E,instance:R,store:M,EVENTS:j})).then(function(k){C=k});C=f}();return T&&T.then?T.then(b):b()})}catch(f){return Promise.reject(f)}var Y,V,p}(o,t,e,a,n)).then(function(h){var O=i(h);return s=1,O})}();return Promise.resolve(P&&P.then?P.then(c):c(P))}catch(h){return Promise.reject(h)}}}}}function wh(e){return function(t){return function(n){return function(r){var a=r.type,i=r.key,o=r.value,s=r.options;if(a===x.setItem||a===x.removeItem){if(r.abort)return n(r);a===x.setItem?e.setItem(i,o,s):e.removeItem(i,s)}return n(r)}}}}var $h=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(a){return a===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(a){var i={getState:n.getState,dispatch:function(s){return n.dispatch(s)}},o=e[t].map(function(s){return s(i)});return Fe.apply(void 0,o)(r)(a)}}}}};function Sh(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var a=Ma(n.type,"registerPlugin"),i=e()[a];if(!i||!a)return t;var o=n.enabled;return r[a]={enabled:o,initialized:!!o&&Boolean(!i.initialize),loaded:!!o&&Boolean(i.loaded()),config:i.config||{}},I({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var s=Ma(n.type,x.initialize),c=e()[s];return c&&s?(r[s]=I({},t[s],{initialized:!0,loaded:Boolean(c.loaded())}),I({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=I({},t[n.name],{loaded:!0}),I({},t,r);switch(n.type){case x.disablePlugin:return I({},t,ja(n.plugins,!1,t));case x.enablePlugin:return I({},t,ja(n.plugins,!0,t));default:return t}}}function Ma(e,t){return e.substring(t.length+1,e.length)}function ja(e,t,n){return e.reduce(function(r,a){return r[a]=I({},n[a],{enabled:t}),r},n)}function La(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var Ih={last:{},history:[]};function xh(e,t){e===void 0&&(e=Ih);var n=t.options,r=t.meta;if(t.type===x.track){var a=La(I({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return I({},e,{last:a,history:e.history.concat(a)})}return e}var Oh={actions:[]};function Ah(e,t){e===void 0&&(e=Oh);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===x.identify?[t].concat(e.actions):e.actions.concat(t),I({},e,{actions:r});case"dequeue":return[];default:return e}}var Ra=/#.*$/;function Ph(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Ra,""):"")}var qa,Ua,Fa,za,kh=function(e){if(e===void 0&&(e={}),!Q)return e;var t=document,n=t.title,r=t.referrer,a=window,i=a.location,o=a.innerWidth,s=a.innerHeight,c=i.hash,u=i.search,l=function(m){var g=function(){if(Q){for(var _,y=document.getElementsByTagName("link"),v=0;_=y[v];v++)if(_.getAttribute("rel")==="canonical")return _.getAttribute("href")}}();return g?g.match(/\?/)?g:g+m:window.location.href.replace(Ra,"")}(u),d={title:n,url:l,path:Ph(l),hash:c,search:u,width:o,height:s};return r&&r!==""&&(d.referrer=r),I({},d,e)},Ch={last:{},history:[]};function Th(e,t){e===void 0&&(e=Ch);var n=t.options;if(t.type===x.page){var r=La(I({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return I({},e,{last:r,history:e.history.concat(r)})}return e}qa=function(){if(!Q)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Ua=Q?document.referrer:null,Fa=uh(),za=lh();var Ga={initialized:!1,sessionId:Tt(),app:null,version:null,debug:!1,offline:!!Q&&!navigator.onLine,os:{name:qa},userAgent:Q?navigator.userAgent:"node",library:{name:"analytics",version:"0.11.0"},timezone:za,locale:Fa,campaign:{},referrer:Ua};function Eh(e,t){e===void 0&&(e=Ga);var n=e.initialized,r=t.campaign;switch(t.type){case x.campaign:return I({},e,{campaign:r});case x.offline:return I({},e,{offline:!0});case x.online:return I({},e,{offline:!1});default:return n?e:I({},Ga,e,{initialized:!0})}}var Dh=["plugins","reducers","storage"];function Nh(e,t,n){if(Q){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(a){r(a,t)})}}function Mh(e){var t=Nh.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function Ba(){return pe("analytics",[]),function(e){return function(t,n,r){var a=e(t,n,r),i=a.dispatch;return Object.assign(a,{dispatch:function(o){return Ie[Se].analytics.push(o.action||o),i(o)}})}}}function Ha(e){return function(){return Fe(Fe.apply(null,arguments),Ba())}}function In(e){return e?Ai(e)?e:[e]:[]}function Ka(e,t,n){e===void 0&&(e={});var r,a,i=Tt();return t&&(it[i]=(r=t,a=function(o){for(var s,c=o||Array.prototype.slice.call(arguments),u=0;u<c.length;u++)if(ne(c[u])){s=c[u];break}return s}(n),function(o){a&&a(o),r(o)})),I({},e,{rid:i,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function jh(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(p,f){if(ne(f))return p.middlewares=p.middlewares.concat(f),p;if(f.NAMESPACE&&(f.name=f.NAMESPACE),!f.name)throw new Error("https://lytics.dev/errors/1");var b=f.EVENTS?Object.keys(f.EVENTS).map(function(k){return f.EVENTS[k]}):[];p.pluginEnabled[f.name]=!(f.enabled===!1||f.config&&f.config.enabled===!1),delete f.enabled,f.methods&&(p.methods[f.name]=Object.keys(f.methods).reduce(function(k,B){var D;return k[B]=(D=f.methods[B],function(){for(var G=Array.prototype.slice.call(arguments),N=new Array(D.length),re=0;re<G.length;re++)N[re]=G[re];return N[N.length]=h,D.apply({instance:h},N)}),k},{}),delete f.methods);var C=Object.keys(f).concat(b),T=new Set(p.events.concat(C));if(p.events=Array.from(T),p.pluginsArray=p.pluginsArray.concat(f),p.plugins[f.name])throw new Error(f.name+"AlreadyLoaded");return p.plugins[f.name]=f,p.plugins[f.name].loaded||(p.plugins[f.name].loaded=function(){return!0}),p},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),a=e.storage?e.storage:{getItem:me,setItem:pe,removeItem:xe},i=function(p){return function(f,b,C){return b.getState("user")[f]||(C&&J(C)&&C[f]?C[f]:Sa(p)[f]||me(bn(f))||null)}}(a),o=r.plugins,s=r.events.filter(function(p){return!vn.includes(p)}).sort(),c=new Set(s.concat(Dt).filter(function(p){return!vn.includes(p)})),u=Array.from(c).sort(),l=function(){return o},d=new $h,m=d.addMiddleware,g=d.removeMiddleware,_=d.dynamicMiddlewares,y=function(){throw new Error("Abort disabled inListener")},v=dh(),w=Sa(a),$=I({},w,n,v.an_uid?{userId:v.an_uid}:{},v.an_aid?{anonymousId:v.an_aid}:{});$.anonymousId||($.anonymousId=Tt());var P=I({enable:function(p,f){return new Promise(function(b){A.dispatch({type:x.enablePlugin,plugins:In(p),_:{originalAction:x.enablePlugin}},b,[f])})},disable:function(p,f){return new Promise(function(b){A.dispatch({type:x.disablePlugin,plugins:In(p),_:{originalAction:x.disablePlugin}},b,[f])})}},r.methods),h={identify:function(p,f,b,C){try{var T=we(p)?p:null,k=J(p)?p:f,B=b||{},D=h.user();pe(bn(ue),T);var G=T||k.userId||i(ue,h,k);return Promise.resolve(new Promise(function(N){A.dispatch(I({type:x.identifyStart,userId:G,traits:k||{},options:B,anonymousId:D.anonymousId},D.id&&D.id!==T&&{previousId:D.id}),N,[f,b,C])}))}catch(N){return Promise.reject(N)}},track:function(p,f,b,C){try{var T=J(p)?p.event:p;if(!T||!we(T))throw new Error("EventMissing");var k=J(p)?p:f||{},B=J(b)?b:{};return Promise.resolve(new Promise(function(D){A.dispatch({type:x.trackStart,event:T,properties:k,options:B,userId:i(ue,h,f),anonymousId:i(Ge,h,f)},D,[f,b,C])}))}catch(D){return Promise.reject(D)}},page:function(p,f,b){try{var C=J(p)?p:{},T=J(f)?f:{};return Promise.resolve(new Promise(function(k){A.dispatch({type:x.pageStart,properties:kh(C),options:T,userId:i(ue,h,C),anonymousId:i(Ge,h,C)},k,[p,f,b])}))}catch(k){return Promise.reject(k)}},user:function(p){if(p===ue||p==="id")return i(ue,h);if(p===Ge||p==="anonId")return i(Ge,h);var f=h.getState("user");return p?ha(f,p):f},reset:function(p){return new Promise(function(f){A.dispatch({type:x.resetStart},f,p)})},ready:function(p){return h.on(x.ready,p)},on:function(p,f){if(!p||!ne(f))return!1;if(p===x.bootstrap)throw new Error(".on disabled for "+p);var b=/Start$|Start:/;if(p==="*"){var C=function(D){return function(G){return function(N){return N.type.match(b)&&f({payload:N,instance:h,plugins:o}),G(N)}}},T=function(D){return function(G){return function(N){return N.type.match(b)||f({payload:N,instance:h,plugins:o}),G(N)}}};return m(C,Nt),m(T,Mt),function(){g(C,Nt),g(T,Mt)}}var k=p.match(b)?Nt:Mt,B=function(D){return function(G){return function(N){return N.type===p&&f({payload:N,instance:h,plugins:o,abort:y}),G(N)}}};return m(B,k),function(){return g(B,k)}},once:function(p,f){if(!p||!ne(f))return!1;if(p===x.bootstrap)throw new Error(".once disabled for "+p);var b=h.on(p,function(C){f({payload:C.payload,instance:h,plugins:o,abort:y}),b()});return b},getState:function(p){var f=A.getState();return p?ha(f,p):Object.assign({},f)},dispatch:function(p){var f=we(p)?{type:p}:p;if(Dt.includes(f.type))throw new Error("reserved action "+f.type);var b=I({},f,{_:I({originalAction:f.type},p._||{})});A.dispatch(b)},enablePlugin:P.enable,disablePlugin:P.disable,plugins:P,storage:{getItem:a.getItem,setItem:function(p,f,b){A.dispatch({type:x.setItemStart,key:p,value:f,options:b})},removeItem:function(p,f){A.dispatch({type:x.removeItemStart,key:p,options:f})}},setAnonymousId:function(p,f){h.storage.setItem(ce,p,f)},events:{core:Dt,plugins:s}},O=r.middlewares.concat([function(p){return function(f){return function(b){return b.meta||(b.meta=Ka()),f(b)}}},_(Nt),bh(h,l,{all:u,plugins:s}),wh(a),hh(h),_h(h),_(Mt)]),R={context:Eh,user:yh(a),page:Th,track:xh,plugins:Sh(l),queue:Ah},M=Fe,j=Fe;if(Q&&e.debug){var z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;z&&(M=z({trace:!0,traceLimit:25})),j=function(){return arguments.length===0?Ba():J(typeof arguments[0])?Ha():Ha().apply(null,arguments)}}var q,H=function(p){return Object.keys(p).reduce(function(f,b){return Dh.includes(b)||(f[b]=p[b]),f},{})}(e),U=r.pluginsArray.reduce(function(p,f){var b=f.name,C=f.config,T=f.loaded,k=r.pluginEnabled[b];return p[b]={enabled:k,initialized:!!k&&Boolean(!f.initialize),loaded:Boolean(T()),config:C||{}},p},{}),K={context:H,user:$,plugins:U},A=va(function(p){for(var f=Object.keys(p),b={},C=0;C<f.length;C++){var T=f[C];typeof p[T]===se&&(b[T]=p[T])}var k,B=Object.keys(b);try{(function(D){Object.keys(D).forEach(function(G){var N=D[G];if(typeof N(void 0,{type:"@@redux/INIT"})===ie||typeof N(void 0,{type:mh})===ie)throw new Error("reducer "+G+" "+ie)})})(b)}catch(D){k=D}return function(D,G){if(D===void 0&&(D={}),k)throw k;for(var N=!1,re={},He=0;He<B.length;He++){var Ke=B[He],bi=D[Ke],En=(0,b[Ke])(bi,G);if(typeof En===ie){var rb=ph(Ke,G);throw new Error(rb)}re[Ke]=En,N=N||En!==bi}return N?re:D}}(I({},R,t)),K,j(M(gh.apply(void 0,O))));A.dispatch=(q=A.dispatch,function(p,f,b){var C=I({},p,{meta:Ka(p.meta,f,In(b))});return q.apply(null,[C])});var E=Object.keys(o);A.dispatch({type:x.bootstrap,plugins:E,config:H,params:v,user:$,initialUser:n,persistedUser:w});var Y=E.filter(function(p){return r.pluginEnabled[p]}),V=E.filter(function(p){return!r.pluginEnabled[p]});return A.dispatch({type:x.registerPlugins,plugins:E,enabled:r.pluginEnabled}),r.pluginsArray.map(function(p,f){var b=p.bootstrap,C=p.config,T=p.name;b&&ne(b)&&b({instance:h,config:C,payload:p}),A.dispatch({type:x.registerPluginType(T),name:T,enabled:r.pluginEnabled[T],plugin:p}),r.pluginsArray.length===f+1&&A.dispatch({type:x.initializeStart,plugins:Y,disabled:V})}),Mh(function(p){A.dispatch({type:p?x.offline:x.online})}),function(p,f,b){setInterval(function(){return Oa(p,f,b)},3e3)}(A,l,h),h}var Nt="before",Mt="after";function Lh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wa(Object(n),!0).forEach(function(r){Lh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:qi};return jh(Va(Va({},t),e))}const jt=[];class st{static add(t,n,r){qh(t,n).add(r)}static remove(t,n,r){let a=Ja(t,n);a&&a.remove(r)}constructor(t,n){this.context=t,this.methodName=n,this.isTask=/Task$/.test(n),this.originalMethodReference=this.isTask?t.get(n):t[n],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=(...r)=>{const a=this.boundMethodChain[this.boundMethodChain.length-1];return a(...r)},this.isTask?t.set(n,this.wrappedMethod):t[n]=this.wrappedMethod}add(t){this.methodChain.push(t),this.rebindMethodChain()}remove(t){const n=this.methodChain.indexOf(t);n>-1&&(this.methodChain.splice(n,1),this.methodChain.length>0?this.rebindMethodChain():this.destroy())}rebindMethodChain(){this.boundMethodChain=[];for(let t,n=0;t=this.methodChain[n];n++){const r=this.boundMethodChain[n-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(t(r))}}destroy(){const t=jt.indexOf(this);t>-1&&(jt.splice(t,1),this.isTask?this.context.set(this.methodName,this.originalMethodReference):this.context[this.methodName]=this.originalMethodReference)}}function Ja(e,t){return jt.filter(n=>n.context==e&&n.methodName==t)[0]}function qh(e,t){let n=Ja(e,t);return n||(n=new st(e,t),jt.push(n)),n}class Uh{constructor(t){!history.pushState||!window.addEventListener||(this.onUrlChange=()=>{console.warn("UrlChangeTracker not given a callback")},this.path=Xa(),this.trackReplaceState=t,this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),st.add(history,"pushState",this.pushStateOverride),st.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState))}setCallback(t){this.onUrlChange=t}pushStateOverride(t){return(...n)=>{t(...n),this.handleUrlChange(!0)}}replaceStateOverride(t){return(...n)=>{t(...n),this.handleUrlChange(!1)}}handlePopState(){this.handleUrlChange(!0)}handleUrlChange(t){setTimeout(()=>{const n=this.path,r=Xa();n!=r&&this.shouldTrackUrlChange(r,n)&&(this.path=r,(t||this.trackReplaceState)&&this.onUrlChange(r,n))},0)}shouldTrackUrlChange(t,n){return!!(t&&n)}remove(){this.queue.destroy(),st.remove(history,"pushState",this.pushStateOverride),st.remove(history,"replaceState",this.replaceStateOverride),window.removeEventListener("popstate",this.handlePopState)}}function Xa(){return location.pathname+location.search}const Fh=async(e,t,n)=>{var m,g,_,y;S("add to cart form submitted",n);const r=(m=window==null?void 0:window.slideruleData)==null?void 0:m.destinations;r&&(S("add to cart form submit, recheck ids",n),(_=(g=window==null?void 0:window.slideruleData)==null?void 0:g.configurationOptions)!=null&&_.skipATCIdentifiersUpdate||await at(r,!0,n,!0));const a=t.querySelector('select[name="id"]')||t.querySelector('input[name="id"]'),i=t.querySelector('input[name="quantity"]')||document.querySelector('input[name="quantity"]'),o=a.value,s=(y=i==null?void 0:i.value)!=null?y:1,c={id:Number(o),quantity:Number(s)},u=F(window.slideruleData,"cart.items",[]),l=F(window.slideruleData,"cart.token",null);if(!Ct(u,{id:c.id})){const v=await gn("add_to_cart",c,l);window.slideruleData.cart.items.push({...v,id:c.id,quantity:c.quantity})}},zh=async e=>{document.querySelectorAll('form[action^="/cart/add"]').forEach(async n=>{S("add to cart form found. Adding submit listeners.",e);const r=async a=>{await Fh(a,n,e)};n.addEventListener("submit",r)})},xn=async(e,t)=>{var i,o,s;const n=await de();S(`handling cart change from ${e}`,t);const r=F(window.slideruleData,"cart.items",[]),{items:a}=n;if(r.length>a.length)for(const c of r)Ct(a,{id:c.id})||gn("remove_from_cart",c,n.token);else if(a.length>r.length){for(const c of a)if(!Ct(r,{id:c.id})){gn("add_to_cart",c,n.token);const l=(i=window==null?void 0:window.slideruleData)==null?void 0:i.destinations;l&&(S("add to cart fetch, recheck ids",t),(s=(o=window==null?void 0:window.slideruleData)==null?void 0:o.configurationOptions)!=null&&s.skipATCIdentifiersUpdate||await at(l,!0,t,!0))}}return await fa()},Gh=e=>{(function(t,n){typeof n=="function"&&(t.fetch=function(r,a){const i=F(a,"method","none"),o=n.apply(this,arguments);return o.then(async s=>{const c=s.url,u=i.toUpperCase()==="POST",l=c.toString().includes("/cart/add")||c.toString().includes("/cart/change");if(u&&l)return S(`fetch cart update detected to ${c}`,e),await xn("fetch",e)}),o})})(window,window.fetch)},Bh=e=>{const t=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...n){const[r,a]=n;return this.addEventListener("readystatechange",()=>{this.readyState===this.DONE&&(async({method:i,url:o})=>{const s=i.toUpperCase()==="POST",c=o.toString().includes("/cart/add")||o.toString().includes("/cart/change");if(s&&c){S(`XHR cart update detected to ${o}`,e);const u=await window.fetch("/cart.js");return u.clone().json().then(async()=>{if(o.includes("change.js"))return await xn("XHR",e);if(o.includes("add.js"))return await xn("XHR",e)}),u}})({method:r,url:a}).catch()}),t.apply(this,n)}},Hh=async e=>{var n;const t=(n=window==null?void 0:window.slideruleData)==null?void 0:n.pageType;t==="confirmation"||t==="purchase"||t==="post-purchase"||(fa(),Bh(e),Gh(e))};function Kh(e){return e==null}var be=Kh,Wh="Expected a function";function Vh(e){if(typeof e!="function")throw new TypeError(Wh);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var Jh=Vh,Xh=he,Zh=function(){try{var e=Xh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Yh=Zh,Za=Yh;function Qh(e,t,n){t=="__proto__"&&Za?Za(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ey=Qh,ty=ey,ny=Ht,ry=Object.prototype,ay=ry.hasOwnProperty;function iy(e,t,n){var r=e[t];(!(ay.call(e,t)&&ny(r,n))||n===void 0&&!(t in e))&&ty(e,t,n)}var oy=iy,sy=oy,cy=kt,uy=Yt,Ya=ke,ly=nt;function dy(e,t,n,r){if(!Ya(e))return e;t=cy(t,e);for(var a=-1,i=t.length,o=i-1,s=e;s!=null&&++a<i;){var c=ly(t[a]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(a!=o){var l=s[c];u=r?r(l,c,s):void 0,u===void 0&&(u=Ya(l)?l:uy(t[a+1])?[]:{})}sy(s,c,u),s=s[c]}return e}var fy=dy,my=pn,py=fy,gy=kt;function hy(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=my(e,o);n(s,o)&&py(i,gy(o,e),s)}return i}var yy=hy,_y=or,vy=Jg,by=lr,wy=cr,$y=Object.getOwnPropertySymbols,Sy=$y?function(e){for(var t=[];e;)_y(t,by(e)),e=vy(e);return t}:wy,Iy=Sy;function xy(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Oy=xy,Ay=ke,Py=nn,ky=Oy,Cy=Object.prototype,Ty=Cy.hasOwnProperty;function Ey(e){if(!Ay(e))return ky(e);var t=Py(e),n=[];for(var r in e)r=="constructor"&&(t||!Ty.call(e,r))||n.push(r);return n}var Dy=Ey,Ny=gr,My=Dy,jy=De;function Ly(e){return jy(e)?Ny(e,!0):My(e)}var Ry=Ly,qy=sr,Uy=Iy,Fy=Ry;function zy(e){return qy(e,Fy,Uy)}var Gy=zy,By=fn,Hy=je,Ky=yy,Wy=Gy;function Vy(e,t){if(e==null)return{};var n=By(Wy(e),function(r){return[r]});return t=Hy(t),Ky(e,n,function(r,a){return t(r,a[0])})}var Jy=Vy,Xy=je,Zy=Jh,Yy=Jy;function Qy(e,t){return Yy(e,Zy(Xy(t)))}var le=Qy;function e_(e,t){const n={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[r]||r;n[a]=e[r]}return n}const t_=async(e,t)=>{const{version:n}=window.slideruleData,r={plugins:{all:!0,"google-analytics":!1,"meta-pixel":!1}};let a;if(n==="v0.0.1"||e==="post-purchase")a=window.slideruleData.orderInformation;else if(n==="v0.0.2"){const{checkout:o,customer:s}=window.slideruleData.shopifyLiquidData,c=window.Shopify.checkout,u=c.line_items.map(m=>{const g={item_product_id:`${m.product_id}`,item_id:`${m.variant_id}`,item_name:m.title,item_brand:m.vendor,item_variant:m.variant_title,affiliation:m.vendor,currency:c.currency,price:Number(m.price),quantity:m.quantity,sku:m.sku};try{const _=m.discount_allocations.map(w=>w.description).join(", "),y=m.discount_allocations.reduce((w,$)=>w+Number($.amount),0),v=Number(m.price)-y;g.coupon=_,g.price=v,g.discount=y}catch(_){console.log(`SlideRule Analytics: cannot read discount allocations. ${_}`)}return g}),d=le(e_(s,{"b2b?":"is_b2b",id:"customer_id"}),(m,g)=>g==="orders_count"&&m===0||g==="total_spent"&&m===0||m===null?!0:be(m));d.customer_id=`${d.customer_id}`,a={transaction_id:`${c.order_id}`,order_number:`${o.order_number}`,order_name:o.order_name,customer_id:`${c.customer_id}`,currency:c.currency,shipping:Number(c.shipping_rate.price),value:Number(c.total_price),tax:Number(o.tax_price)/100,items:u,user_properties:d};try{const m=c.discount.code,g=c.discount.amount;a.coupon=m,a.discount=g}catch(m){console.log(`SlideRule Analytics: cannot read discount allocations. ${m}`)}}const i=e==="post-purchase"?t:e;window.slideruleData.analytics.track(i,{ecommerce_event:!0,...a},r)},n_=async()=>{const{collection:{id:e,handle:t,title:n,rawProducts:r}}=window.slideruleData,i=r.slice(0,5).map(o=>wi(o));window.slideruleData.analytics.track("view_item_list",{ecommerce_event:!0,currency:da(),item_list_id:e||t,item_list_name:n,items:i.map(o=>rt(o))})},Qa=async e=>{const t=await ut(e);if(!t)return!1;const n=Qg(window.location.href),r=rt(t,n);return window.slideruleData.analytics.track("view_item",{ecommerce_event:!0,currency:r.currency,value:r.price,items:[r]}),r},r_=async()=>{const e=await de();if(!e)return!1;const{items:t,currency:n,total_price:r,token:a}=e,i=[];for(const s of t){const{handle:c,id:u}=s,l=await ut(c);i.push(rt(l,u))}const o={ecommerce_event:!0,currency:n,cart_id:a,value:r/100,items:i};return window.slideruleData.analytics.track("view_cart",o),o},a_=async e=>{const t=await de();if(!t)return!1;const{items:n,currency:r,total_price:a,token:i}=t,o=[];for(const l of n){const{handle:d,id:m}=l,g=await ut(d);o.push(rt(g,m))}const s={ecommerce_event:!0,currency:r,cart_id:i,value:a/100,items:o},u={contact_information:"begin_checkout",payment_method:"add_shipping_info",processing:"add_payment_info"}[e];return u==="add_shipping_info"&&(s.shipping_tier=F(window,"slideruleData.shippingMethod.title","None")),u==="add_payment_info"&&(s.payment_type=F(window,"slideruleData.paymentMethod.gatewayDisplayName","None")),u&&window.slideruleData.analytics.track(u,s),s},ei=async()=>{var e,t;try{(t=(e=window==null?void 0:window.slideruleData)==null?void 0:e.configurationOptions)!=null&&t.usePageUrlsForEvents&&window.location.pathname.includes("/products/")&&(window.slideruleData.pageType="product")}catch(n){S("SlideRule Analytics Tracker: usePageUrlsForEvents failed",n)}try{if(window.slideruleData){const{pageType:n,postPurchaseEvent:r}=window.slideruleData,a=F(window,"Shopify.Checkout.step");return n==="product"?await Qa():n==="collection"?await n_():n==="cart"?await r_():n==="confirmation"||n==="purchase"||n==="post-purchase"?await t_(n,r):a?await a_(a):null}console.log("SlideRule Analytics Tracker: SlideRule Data Object is not loaded")}catch(n){console.log("SlideRule Analytics Tracker: track call failed",n)}return null},i_=async e=>{document.addEventListener("customViewItem",function(t){var n,r;S(`custom view item event triggered for ${(n=t==null?void 0:t.detail)==null?void 0:n.handle}`,e),(r=t==null?void 0:t.detail)!=null&&r.handle&&Qa(t.detail.handle)})},o_=e=>{var n,r,a,i,o,s;const t={data_source:"klaviyo",company_id:e==null?void 0:e.companyId,form_id:e==null?void 0:e.formId,form_version_id:e==null?void 0:e.formVersionId,form_name:(n=e==null?void 0:e.metaData)==null?void 0:n.$source,type:e==null?void 0:e.type,email:(r=e==null?void 0:e.metaData)==null?void 0:r.$email,phone_number:(a=e==null?void 0:e.metaData)==null?void 0:a.$phone_number,list_id:(i=e==null?void 0:e.metaData)==null?void 0:i.g,consent_method:(o=e==null?void 0:e.metaData)==null?void 0:o.$consent_method,step_name:(s=e==null?void 0:e.metaData)==null?void 0:s.$step_name,klaviyo_meta_data:e==null?void 0:e.metaData};return le(t,be)},s_=(e,t)=>{const n={open:()=>"form_open",embedOpen:()=>"form_open",close:()=>"form_close",redirectedToUrl:()=>"form_redirect",submit:r=>{var a,i;return((a=r==null?void 0:r.metaData)==null?void 0:a.$email)||((i=r==null?void 0:r.metaData)==null?void 0:i.$phone_number)?"contact_subscribe":"form_submit"},stepSubmit:()=>"form_step_submit",default:r=>Re(r)};return n[e](t)||n.default(e)},c_=e=>{window.addEventListener("klaviyoForms",t=>{var n,r,a;try{const i=t.detail.type,o=t.detail,s=s_(i,o),c=o_(o);i==="embedOpen"?c.form_type="embed":i==="open"&&(c.form_type="popup"),i==="submit"&&(((n=o==null?void 0:o.metaData)==null?void 0:n.$email)||((r=o==null?void 0:o.metaData)==null?void 0:r.$phone_number))&&(c.subscribed_via=(a=o==null?void 0:o.metaData)!=null&&a.$email?"email":"phone",window.slideruleData.analytics.identify(le({is_subscribed:!0,email:c.email,phone_number:c.phone_number},be))),window.slideruleData.analytics.track(s,c)}catch(i){S(`klaviyo form tracking error: ${JSON.stringify(i)}`,e)}})},ti=async(e,t,n)=>{var a,i,o,s,c,u;S("loading analytics library.",e),window.slideruleData.analytics=Rh({app:"sliderule-analytics",version:"1",plugins:t}),S(`analytics library loaded. with plugins ${JSON.stringify(t)}`,e),window.slideruleData.analytics.on("ready",async()=>{S("analytics ready.",e);const l=window.slideruleData.destinations;await at(l,n.analytics,e)}),c_(e),window.dataLayer=window.dataLayer||[],((i=(a=window==null?void 0:window.slideruleData)==null?void 0:a.configurationOptions)==null?void 0:i.initalizeGA4Manually)||((s=(o=window==null?void 0:window.slideruleData)==null?void 0:o.configurationOptions)==null?void 0:s.skipInitialPageview)?(S("skipping initial pageview for ga",!0),window.slideruleData.analytics.page({fired_from:"SlideRule Analytics"},{plugins:{"google-analytics":!1}})):window.slideruleData.analytics.page({fired_from:"SlideRule Analytics"}),await ei(),await Hh(e),(u=(c=window==null?void 0:window.slideruleData)==null?void 0:c.configurationOptions)!=null&&u.skipAddToCartForm||await zh(e),await i_(e),new Uh(!0).setCallback(async(l,d)=>{u_(l,d)||(window.slideruleData.analytics.page(),await ei())})};function u_(e,t){const n=i=>{const o=new URL("https://dummy.com"+i),s=new URLSearchParams(o.search);s.delete("pscroll");const c=s.toString();return o.pathname+(c?`?${c}`:"")},r=n(e),a=n(t);return r===a}function On(e={}){return{analytics:e.analytics||{enabled:!1,status:"default"},preferences:e.preferences||{enabled:!1,status:"default"},marketing:e.marketing||{enabled:!1,status:"default"},third_party_marketing:e.third_party_marketing||{enabled:!1,status:"default"},sale_of_data:e.sale_of_data||{enabled:!1,status:"default"},should_show_banner:e.should_show_banner!==void 0?e.should_show_banner:!0,google_consent_mode:function(){var t,n,r,a;return{ad_storage:(t=this==null?void 0:this.marketing)!=null&&t.enabled?"granted":"denied",ad_user_data:((n=this==null?void 0:this.marketing)==null?void 0:n.enabled)&&!this.should_show_banner?"granted":"denied",ad_personalization:((r=this==null?void 0:this.marketing)==null?void 0:r.enabled)&&!this.should_show_banner?"granted":"denied",analytics_storage:(a=this==null?void 0:this.analytics)!=null&&a.enabled?"granted":"denied"}}}}const ct=e=>{if(e=="")return"default";if(e==="yes")return"accepted";if(e==="no")return"declined"},l_=e=>{var t,n,r,a,i;if(e)return On({analytics:{enabled:e.analytics,status:ct((t=e.current_visitor_consents)==null?void 0:t.analytics)},preferences:{enabled:e.preferences,status:ct((n=e.current_visitor_consents)==null?void 0:n.preferences)},marketing:{enabled:e.marketing,status:ct((r=e.current_visitor_consents)==null?void 0:r.marketing)},third_party_marketing:{enabled:e.third_party_marketing,status:ct((a=e.current_visitor_consents)==null?void 0:a.third_party_marketing)},sale_of_data:{enabled:e.sale_of_data,status:ct((i=e.current_visitor_consents)==null?void 0:i.sale_of_data)},should_show_banner:e.should_show_banner})},d_=async e=>new Promise((t,n)=>{window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],r=>{if(r){n(r);return}const a=window.Shopify.customerPrivacy,i={analytics:a.analyticsProcessingAllowed(),preferences:a.preferencesProcessingAllowed(),marketing:a.firstPartyMarketingAllowed(),third_party_marketing:a.thirdPartyMarketingAllowed(),sale_of_data:a.saleOfDataRegion(),should_show_banner:a.shouldShowBanner(),current_visitor_consents:a.currentVisitorConsent()};S(`Shopify Customer Privacy API response loaded: ${JSON.stringify(i)}`,e),t(i)})}),ni=async e=>{var t;if((window==null?void 0:window.Shopify)&&((t=window==null?void 0:window.Shopify)==null?void 0:t.loadFeatures)){const n=await d_(e);return l_(n)}else return S("No customer privacy API data found. Assuming consent",e),On({analytics:{enabled:!0,status:"default"},marketing:{enabled:!0,status:"default"},should_show_banner:!1})},f_=async(e,t,n,r)=>{var o,s,c,u,l,d;S(`${e} event fired. Rechecking consent status`,r),t=await ni(r),S(`updated consents ${JSON.stringify(t)}. firedInitialPageview=${n} `,r);const{destinations:a,initPlugins:i}=window.slideruleData;return t.analytics.enabled?(await ti(r,i,t),n=!0,await window.slideruleData.analytics.plugins.enable(["google-analytics"]),(c=(s=(o=window.slideruleData)==null?void 0:o.analytics)==null?void 0:s.plugins["google-analytics"])==null||c.updateConsent({consents:t})):window.slideruleData.analytics&&((d=(l=(u=window.slideruleData)==null?void 0:u.analytics)==null?void 0:l.plugins["google-analytics"])==null||d.updateConsent({consents:t}),await window.slideruleData.analytics.plugins.disable(["google-analytics"]),S("analytics consent removed. updating identifiers consents",r),await at(a,t.analytics.enabled,r)),n},m_=async e=>{let t=await ni(e),n=t.analytics.enabled;return S(`initial consents load ${JSON.stringify(t)}`,e),document.addEventListener("visitorConsentCollected",async()=>{n=await f_("visitorConsentCollected",t,n,e)}),t},ri=(e,t)=>{const n={data_action_tracking:!0};t.forEach(a=>{const i=a==="innerText"?e.innerText:e.getAttribute(a);i&&i!==""&&(a==="href"&&(n.url=i.toLowerCase().trim()),a==="innerText"?n.text=i.toLowerCase().trim():n[Re(a)]=i)});const r=e.dataset;for(const a in r){const i=r[a];i!==""&&(n[Re(a)]=i.toLowerCase().trim())}return n},ai=e=>{const{eventName:t,object:n,action:r}=e;return Re(t?t.trim():n?`${n} ${r}`.trim():r.trim())},p_=e=>{const t=e.currentTarget,r=ri(t,["class","id","src","value","role","target","href","innerText"]),a=ai(r);window.slideruleData.analytics.track(a,r)},g_=(e,t)=>{e.forEach(n=>{if(n.isIntersecting){const r=n.target,i=ri(r,["class","id","src","role","href","innerText"]),o=ai(i);window.slideruleData.analytics.track(o,i),t.unobserve(r)}})},h_=(e,t,n)=>{const r=document.querySelectorAll(e),a=new IntersectionObserver(n,t);r.forEach(i=>{a.observe(i)})},y_=()=>{try{document.querySelectorAll('[data-action="click"]').forEach(n=>{n.addEventListener("click",p_)})}catch(t){t.message!=="noElements"?console.error("SlideRule: data action listener error:",t):console.log("SlideRule: no elements with data-action=click found")}h_('[data-action="view"]',{root:null,rootMargin:"0px",threshold:.5},g_)};let An={};const ii="https://www.googletagmanager.com/gtag/js",oi={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},__={gtagName:"gtag",dataLayerName:"dataLayer",measurementIds:[],gtagConfig:oi,parametersToStrip:!1,initalizedManually:!1};function v_(e={}){let t=0,n=Pn(e.measurementIds);const r={...__,...e};return{name:"google-analytics",config:r,initialize:({config:a,instance:i})=>{const{dataLayerName:o,customScriptSrc:s,gtagName:c,gtagConfig:u,debug:l,parametersToStrip:d,initialTraits:m,initalizedManually:g,consents:_}=a;if(g===!0)return;const y=o?`&l=${o}`:"";w_({consents:_,gtagName:c,dataLayerName:o});const v=s||`${ii}?id=${n[0]}${y}`;if(!si(v)){const P=document.createElement("script");P.async=!0,P.src=v,document.body.appendChild(P)}window[o]||(window[o]=window[o]||[]),window[c]||(window[c]=function(){window[o].push(arguments)}),window[c]("js",new Date);let w={...oi,...u||{}};l===!0?w.debug_mode=!0:delete w.debug_mode,Object.keys(m).length&&window[c]("set","user_properties",m),d&&(w.page_location=ci(document.location,d),w.original_query_params=document.location.search);for(var $=0;$<n.length;$++)An[n[$]]||(window[c]("config",n[$],w),An[n[$]]=!0)},identify:({payload:a,config:i})=>{const{gtagName:o,dataLayerName:s}=i;if(!(!window[o]||!n.length)&&(a.userId&&window[o]("set",{user_id:a.userId}),Object.keys(a.traits).length))for(var c=0;c<n.length;c++)window[o]("config",n[c],{user_properties:a.traits}),An[n[c]]=!0,window[s]=window[s]||[],window[o]=function(){window[s].push(arguments)},window[o]("js",new Date),kn(n,o,"identify",{user_properties:a.traits})},page:async({payload:a,config:i,instance:o})=>{await A_(n,i.debug);const{gtagName:s,gtagConfig:c,parametersToStrip:u}=i;if(!window[s]||!n.length)return;const{properties:l}=a,{send_to:d}=l,m={page_title:l.title,page_location:u?ci(l.url,u):l.url,page_path:l.path||document.location.pathname,page_hash:l.hash,page_search:l.search,page_referrer:l.referrer,original_query_params:document.location.search},g={...d?{send_to:d}:{},...l,...m};if(c&&c.send_page_view&&t===0){t++;return}kn(n,s,"page_view",g),t++},track:({payload:a,config:i,instance:o})=>{const{properties:s,event:c}=a,u=o.getState("context.campaign"),{gtagName:l,dataLayerName:d}=i;if(!window[l]||!n.length)return;const m=b_(u),g={...s,...m};window[d]=window[d]||[],window[l]=function(){window[d].push(arguments)},window[l]("js",new Date),kn(n,l,c,g)},loaded:()=>{const{dataLayerName:a,customScriptSrc:i}=r,o=a&&window[a]&&window[a].length>0;return si(i||ii)&&o},methods:{addTag(a,i={}){window[r.gtagName]&&(window[r.gtagName]("config",a,i),n&&!n.includes(a)&&(n=n.concat(a)))},disable:a=>{const i=a?Pn(a):n;for(var o=0;o<n.length;o++){const s=n[o];i.includes(s)&&(window[`ga-disable-${s}`]=!0)}},enable:a=>{const i=a?Pn(a):n;for(var o=0;o<n.length;o++){const s=n[o];i.includes(s)&&(window[`ga-disable-${s}`]=!1)}},updateConsent:(a,i)=>{try{const{consents:o}=a;console.log("update consents",a,i),console.log("update consents",o,o.google_consent_mode(),r.gtagName),window[r.gtagName]("consent","update",o.google_consent_mode())}catch{console.log("ga4 updateConsent error",a,i)}}}}}function Pn(e){if(!e)throw new Error("No GA Measurement ID defined");if(Array.isArray(e))return e;if(typeof e=="string")return[e];throw new Error("GA Measurement ID must be string or array of strings")}function b_(e={}){let t={};const{id:n,name:r,source:a,medium:i,content:o,keyword:s}=e;return n&&(t.campaignId=n),r&&(t.campaignName=r),a&&(t.campaignSource=a),i&&(t.campaignMedium=i),o&&(t.campaignContent=o),s&&(t.campaignKeyword=s),t}function si(e){const t=document.querySelectorAll("script[src]"),n=new RegExp(`^${e}`);return Boolean(Object.values(t).filter(r=>n.test(r.src)).length)}const ci=(e,t)=>{const n=new URL(e),r=n.searchParams;return t.forEach(a=>{r.delete(a)}),n.search=r.toString(),n.toString()},kn=(e,t,n,r)=>{for(var a=0;a<e.length;a++)window[t]("event",n,{...r,send_to:e[a]})},w_=({consents:e,gtagName:t,dataLayerName:n})=>{try{console.log("initializeConsent",e,e.google_consent_mode(),t,n),window[n]||(window[n]=window[n]||[]),window[t]||(window[t]=function(){window[n].push(arguments)}),window[t]("consent","default",e.google_consent_mode())}catch{console.log("ga4 initializeConsent error",e,t,n)}};function $_({measurement_id:e,client_id:t,session_id:n,hits_count:r,session_start:a,first_visit:i}){var y,v,w,$;const o=(y=window==null?void 0:window.location)==null?void 0:y.href,s=(v=window==null?void 0:window.location)==null?void 0:v.pathname,c=(w=window==null?void 0:window.location)==null?void 0:w.search,u=($=window==null?void 0:window.location)==null?void 0:$.hash,l=document.title,d=document==null?void 0:document.referrer,m=navigator==null?void 0:navigator.language,g=navigator==null?void 0:navigator.userAgent;return{client_id:t,session_id:n,measurement_id:e,session_start:a,first_visit:i,page_title:l,page_location:o,page_path:s,page_search:c,page_hash:u,page_referrer:d,user_language:m,screen_resolution:`${window.outerWidth||0}x${window.outerHeight||0}`,...S_(g),hits_count:r}}function S_(e){let t="x86";/x86_64|Win64|WOW64/.test(e)&&(t="x86");let n="32";/x86_64|Win64|WOW64/.test(e)&&(n="64");let r="0";/Mobi|Android|iP[ao]d|iPhone/i.test(e)&&(r="1");let a="",i="Other";/Macintosh/.test(e)?i="macOS":/Windows/.test(e)?i="Windows":/Android/.test(e)?i="Android":/iPhone/.test(e)&&(i="iPhone");let o="";const s=/Mac OS X ([\d_]+)/.exec(e);if(s)o=s[1].replace(/_/g,".");else{const u=/Windows NT ([\d.]+)/.exec(e);if(u)o=u[1];else{const l=/Android ([\d.]+)/.exec(e);if(l)o=l[1];else{const d=/CPU iPhone OS ([\d_]+)/.exec(e);d&&(o=d[1].replace(/_/g,"."))}}}let c="0";return/WOW64/.test(e)&&(c="1"),{user_agent_architecture:t,user_agent_bitness:n,user_agent_mobile:r,user_agent_model:a,user_agent_platform:i,user_agent_platform_version:o,user_agent_wow64:c}}function I_({event_name:e,event_parameters:t,user_properties:n,standard_parameters:r}){const a={protocol_version:"v",measurement_id:"tid",gtm_hash_info:"gtm",random_page_load_hash:"_p",client_id:"cid",user_language:"ul",screen_resolution:"sr",user_agent_architecture:"uaa",user_agent_bitness:"uab",user_agent_full_version_list:"uafvl",user_agent_mobile:"uamb",user_agent_platform:"uap",user_agent_platform_version:"uapv",page_title:"dt",page_location:"dl",page_path:"dp",page_referrer:"dr",session_id:"sid",session_count:"sct",session_engagement:"seg",event_name:"en",external_event:"_ee",hits_count:"_s",session_start:"_ss",first_visit:"_fv"};let i={v:`${2}`,_p:`${Math.floor(Math.random()*(2147483647-0+1)+0)}`,en:e,seg:"1",are:"1"};for(let o in r)a[o]&&(i[a[o]]=r[o]);for(let o in n)i[`up.${o}`]=n[o];for(let o in t)["items","value","tax","shipping","currency","coupon","transaction_id"].includes(o)||(a[o]?i[a[o]]=t[o]:i[`ep.${o}`]=t[o]);return i}function x_(e){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}const O_=async(e,t)=>{const n="manual_start_session",r=await pa(e,!0),a=await ga(e,!0);Ue("_ga",`GA1.1.${r}`,365),Ue(`_ga_${e.substring(2)}`,`GS1.1.${a}.1.0.${a}.60.0.0`,365);const i=$_({measurement_id:e,client_id:r,session_id:a,hits_count:1,session_start:!0,first_visit:!0}),o=I_({event_name:n,event_parameters:{test:"true",debug_mode:t},user_properties:{},standard_parameters:i}),s="https://www.google-analytics.com/g/collect",c=x_(o),u=`${s}?${c.toString()}`;fetch(u,{method:"POST"}).then(l=>{l.ok?console.log(`${n} Request was successful:`,l.statusText):console.error("Error with request:",l.statusText)}).catch(l=>console.error("Error:",l))},A_=async(e,t)=>{const n=e[0],r=_e(`_ga_${n.substring(2)}`);!["G-L3TYRGQ455","G-0DRJDYCE9L","G-TQ18CH39PX","G-5JQS0J540F"].includes(n)||r||await O_(n,t)},ui={name:"format-google-analytics","track:google-analytics":async({payload:e,plugins:t})=>{const n=t["google-analytics"].config,{encryptePII:r}=n,{event:a,properties:i}=e,o=await yn(i,_n,r);return Object.assign({},e,{event:a,properties:o})},"initialize:google-analytics":async({payload:e,plugins:t,instance:n})=>{const r=t["google-analytics"].config,{encryptePII:a}=r,i=n.user()||{},o=i.traits||{},s=await yn(o,_n,a);return s.anonymous_id=i.anonymousId,delete s.anonymousId,delete s.ecommerce_event,delete s.category,delete s.id,t["google-analytics"].config.initialTraits=s,{payload:e,plugins:t}},"identify:google-analytics":async({payload:e,plugins:t})=>{const n=t["google-analytics"].config,{encryptePII:r}=n,{traits:a}=e,i=await yn(a,_n,r);return Object.assign({},e,{traits:i})}},P_=["fbclid","nb_aaeid","nb_adid","nb_adsetid","nb_adtype","nb_adv","nb_advertiser_id","nb_advli","nb_adxid","nb_adxtype","nb_ageid","nb_agid","nb_aid","nb_aname","nb_androidid","nb_ap","nb_app_name","nb_app_version","nb_asize","nb_atype","nb_bid","nb_bmt","nb_bundle_id","nb_caid","nb_campaignid","nb_ceid","nb_channel_type","nb_cid","nb_ciid","nb_clid","nb_cname","nb_cpc","nb_creative","nb_creative_height","nb_creative_id","nb_creative_name","nb_creative_type","nb_creative_width","nb_creativetype","nb_crid","nb_ct","nb_cturle","nb_d","nb_day_of_week","nb_device","nb_device_id","nb_device_model","nb_device_os","nb_deviceid","nb_did","nb_docid","nb_domain","nb_dt","nb_fii","nb_gdpr","nb_gdpra","nb_gdprconsent","nb_geo_city","nb_geo_country","nb_geo_dma","nb_geo_postal","nb_geo_state","nb_heig","nb_iabusp","nb_idfa","nb_idfa_md5","nb_idfa_sha","nb_igu","nb_imp_height","nb_imp_width","nb_klid","nb_kwd","nb_lat","nb_li_ms","nb_liid","nb_line_item_id","nb_long","nb_lp_ms","nb_mi","nb_mid","nb_month","nb_mt","nb_mtype","nb_n","nb_network","nb_offer","nb_oid","nb_oii","nb_os","nb_partner_name","nb_partner_shared_id","nb_pc","nb_pi","nb_pid","nb_placement","nb_placement_id","nb_platform","nb_plinkid","nb_pn","nb_ppgid","nb_ppi","nb_ppid","nb_product_sku","nb_pubid","nb_publisher","nb_publisher_name","nb_qs","nb_rand","nb_ref_domain","nb_ref_id","nb_ref_page","nb_reqid","nb_sa_do_not_track","nb_secid","nb_sid","nb_sn","nb_source_id","nb_store_url","nb_sub_advertiser_id","nb_subid","nb_ti","nb_tid","nb_tn","nb_tt","nb_ttu","nb_twitchu","nb_twtru","nb_wid","nb_widt","nb_ytu","nbt"],k_=()=>{var i,o;const e={consentManagement:"customer-privacy-banner",dataActionTracking:!0,disableCartAttributes:!1,avoidRaceWithLittelData:!1,initalizeGA4Manually:!1,skipATCIdentifiersUpdate:!0,usePageUrlsForEvents:!1,skipInitialPageview:!1,saveLandingPageUrlParamsToCart:!1,isServerSideTracking:!1},t=(i=window==null?void 0:window.slideruleData)==null?void 0:i.configurationOptions,n={...e,...t},r=(o=window==null?void 0:window.Shopify)==null?void 0:o.shop;return["yora-com-au.myshopify.com","2d27a5.myshopify.com","foot-forward-shoes.myshopify.com","mstars.myshopify.com","eca303-3.myshopify.com","grus-americana.myshopify.com","hub-genuinely-yours.myshopify.com","267d5a-5.myshopify.com","ha2017.myshopify.com","demo-site-100.myshopify.com","equipmentshare.myshopify.com","rishi-tea-1.myshopify.com","homemuscle-6278.myshopify.com","1ab3c8.myshopify.com","dd2cf4.myshopify.com","hest-outdoors.myshopify.com","755018.myshopify.com","e9798a.myshopify.com","dd3a52.myshopify.com","96d86e-2.myshopify.com","cbdmd-5596.myshopify.com","glow-avenue-shop.myshopify.com","0443b7.myshopify.com","onlinestore73999.myshopify.com","490196-4.myshopify.com","getelever2023.myshopify.com","my-store88-2.myshopify.com","7df216.myshopify.com","iqpowertools.myshopify.com","high-camp.myshopify.com","c1a2a1-2.myshopify.com","plastic-cards.myshopify.com","a79db2-3.myshopify.com","amazingoils.myshopify.com","siobeauty.myshopify.com","all-about-that-buzz-designs.myshopify.com","home-and-beauty-norden.myshopify.com","huski.myshopify.com","mod-bikes.myshopify.com","appstoretest5.myshopify.com","randi-solin-glass.myshopify.com","switchjournals.myshopify.com","equipmentshare.myshopify.com","ecualamashop.myshopify.com","rishi-tea-1.myshopify.com","onyx-motorbikes.myshopify.com","high-camp.myshopify.com","venhouse.myshopify.com","beautiful-creations-4896.myshopify.com","the-jewel-joint1.myshopify.com","2045c8-2.myshopify.com","garage-est2016.myshopify.com","hest-outdoors.myshopify.com","755018.myshopify.com","762c9e-4.myshopify.com","neo-smartpen.myshopify.com","getelever2023.myshopify.com","9ef97b-3.myshopify.com","insider-store-loja.myshopify.com","fournituren-zakelijk.myshopify.com","lady-lash.myshopify.com","never-fully-dressed.myshopify.com","havaianasaustralia.myshopify.com","silk-laundry.myshopify.com","newstatebags.myshopify.com","aramara-beauty.myshopify.com","shopmashburn.myshopify.com","dose-and-co-us.myshopify.com","icare-australia.myshopify.com","mybeauty-uk.myshopify.com","this-is-great-1.myshopify.com","loeffler-randall-1.myshopify.com","ha2017.myshopify.com","cbdmd-5596.myshopify.com","misfitshealth-us.myshopify.com","airestech.myshopify.com","barneys-salon-supplies.myshopify.com","hairburstes.myshopify.com","hairburstau.myshopify.com","hairburstcz.myshopify.com","hairburstfr.myshopify.com","hairburst-middle-east.myshopify.com","hairburstit.myshopify.com","hairburstskcz.myshopify.com","hairburstus.myshopify.com","elgeniox.myshopify.com","hunzag-shop.myshopify.com","fournituren-nl.myshopify.com","browntaped.myshopify.com","newbegininng2021.myshopify.com","f9ca6c-2.myshopify.com","herbamama.myshopify.com","wild-and-organic.myshopify.com","aistra-lt.myshopify.com","aistra-lv.myshopify.com","mecha-mendez.myshopify.com","5eab70-80.myshopify.com","cowshedus.myshopify.com","c26aa1-75.myshopify.com","sohoskinus.myshopify.com","vint-york.myshopify.com","debbie-626.myshopify.com","hellobatch.myshopify.com","cmbh-uk.myshopify.com","realtruck-dk.myshopify.com","regalrose.myshopify.com","boggbag.myshopify.com"].includes(r)&&(n.isServerSideTracking=!0),(r==="gipfelstuck.myshopify.com"||r==="indoor-outdoors.myshopify.com"||r==="industrial-tech-store-uk.myshopify.com"||r==="harrys-1982.myshopify.com"||r==="goodson-tools-supplies.myshopify.com"||r==="abrasive-industries.myshopify.com"||r==="airestech.myshopify.com"||r==="siksilk-com.myshopify.com"||r==="siksilk-us.myshopify.com"||r==="siksilkusa.myshopify.com"||r==="siksilk-esp.myshopify.com"||r==="siksilk-fr.myshopify.com"||r==="siksilk-de.myshopify.com"||r==="siksilk-ie.myshopify.com"||r==="siksilk-it.myshopify.com"||r==="siksilk-nl.myshopify.com"||r==="siksilk-pt.myshopify.com"||r==="siksilk-cl.myshopify.com"||r==="multipower-4585.myshopify.com"||r==="multaben.myshopify.com"||r==="siobeauty.myshopify.com"||r==="hydrangea-com.myshopify.com"||r==="exo-mountain-gear.myshopify.com"||r==="tasteireland.myshopify.com"||r==="happyhairbrush.myshopify.com"||r==="wholesale-elite.myshopify.com"||r==="al-ive-body.myshopify.com"||r=="shrimpy-business.myshopify.com"||r=="dazzle-by-sarah.myshopify.com"||r=="swp2018.myshopify.com"||r=="babadoh.myshopify.com"||r=="carlitos-handmade-de.myshopify.com"||r=="bennett-winch.myshopify.com"||r=="spiritpieces.myshopify.com"||r=="eternity-collars.myshopify.com"||r=="liam-avery.myshopify.com"||r=="b14027.myshopify.com"||r=="beekeepinguk.myshopify.com"||r=="beevive.myshopify.com"||r=="smittenknits.myshopify.com"||r=="sourced-by-holly-rhwd.myshopify.com"||r=="welovecushions-rhwd.myshopify.com"||r=="adored-illustrations.myshopify.com"||r=="oti-marn.myshopify.com"||r=="blazers-fan-club.myshopify.com"||r=="tillamook-shop.myshopify.com"||r=="scrummi-dev.myshopify.com"||r=="sensacalm.myshopify.com"||r=="mlt-boutique.myshopify.com"||r=="modern-om.myshopify.com"||r=="pink-clover-flower.myshopify.com"||r=="flowerlovers-2")&&(n.disableCartAttributes=!0),(r==="airestech.myshopify.com"||r==="siobeauty.myshopify.com")&&(n.avoidRaceWithLittelData=!0),r==="gipfelstuck.myshopify.com"||r==="never-fully-dressed.myshopify.com"?n.consentManagement="gdpr-backpack":(r==="slideruleanalytics-demo.myshopify.com"||r==="huuta.myshopify.com"||r==="rare-tea-usa.myshopify.com")&&(n.consentManagement="customer-privacy-banner"),r==="ha2017.myshopify.com"&&(n.usePageUrlsForEvents=!0),(r==="equipmentshare.myshopify.com"||r==="boggbag.myshopify.com")&&(n.skipAddToCartForm=!0),n},C_={debug:!1,containerId:null,dataLayerName:"dataLayer",dataLayer:void 0,preview:void 0,auth:void 0,execution:"async"};let Lt;function li(e={}){return{name:"google-tag-manager",config:{...C_,...e},initialize:({config:t})=>{const{containerId:n,dataLayerName:r,customScriptSrc:a,preview:i,auth:o,execution:s}=t;if(!n)throw new Error("No google tag manager containerId defined");if(i&&!o)throw new Error("When enabling preview mode, both preview and auth parameters must be defined");const c=a||"https://www.googletagmanager.com/gtm.js";fi(n)||(function(u,l,d,m,g){u[m]=u[m]||[],u[m].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var _=l.getElementsByTagName(d)[0],y=l.createElement(d),v=m!="dataLayer"?"&l="+m:"",w=i?"&gtm_preview="+i+"&gtm_auth="+o+"&gtm_cookies_win=x":"";s&&(y[s]=!0),y.src=`${c}?id=`+g+v+w,_.parentNode.insertBefore(y,_)}(window,document,"script",r,n),Lt=r,t.dataLayer=window[r])},page:({payload:t,options:n,instance:r,config:a})=>{typeof a.dataLayer!="undefined"&&(a.dataLayer.push(t.properties),a.dataLayer.push({fired_from:void 0}))},identify:({payload:t,config:n})=>{if(typeof n.dataLayer!="undefined"){const{anonymousId:r,userId:a,traits:i}=t,o=i;a&&(o.userId=a),r&&(o.anonymousId=r),n.dataLayer.push({event:"identify",...o}),n.dataLayer.push({fired_from:void 0})}},track:({payload:t,options:n,config:r})=>{if(typeof r.dataLayer!="undefined"){const{anonymousId:a,userId:i,properties:o}=t,s=o;i&&(s.userId=i),a&&(s.anonymousId=a),o.category||(s.category="All"),r.debug&&console.log("gtag push",{event:t.event,...s}),r.dataLayer.push({event:t.event,...s}),r.dataLayer.push({fired_from:null,ecommerce:null,ecommerce_event:null})}},loaded:()=>{const t=!!Lt&&!!(window[Lt]&&Array.prototype.push!==window[Lt].push);return fi(e.containerId)&&t}}}const di={};function fi(e){let t=di[e];t||(t=new RegExp("googletagmanager\\.com\\/gtm\\.js.*[?&]id="+e),di[e]=t);const n=document.querySelectorAll("script[src]");return!!Object.keys(n).filter(r=>(n[r].src||"").match(t)).length}const mi=["transaction_id","order_number","order_name","customer_id","currency","coupon","payment_type","shipping","shipping_tier","value","tax","item_list_id","item_list_name","items"],T_=e=>{if(typeof e.dataLayer!="undefined"){const t={ecommerce:null};e.debug&&console.log("gtag push",t),e.dataLayer.push(t)}},pi={name:"format-google-tag-manager","track:google-tag-manager":async({payload:e,plugins:t})=>{var a;const n=t["google-tag-manager"].config;let r=Object.assign({},e.properties,{});return T_(n),r.ecommerce_event?r=le({ecommerce:Object.fromEntries(Object.entries(e.properties).filter(([i])=>mi.includes(i))),ecommerce_event:!0,fired_from:"SlideRule Analytics",...le(r,(i,o)=>mi.includes(o))},be):(r.ecommerce_event=!1,r.fired_from="SlideRule Analytics"),r!=null&&r.email&&(r.email_sha256=await qe(r.email)),(a=r==null?void 0:r.user_properties)!=null&&a.email&&(r.email_sha256=await qe(r.email)),Object.assign({},e,{properties:r})},"page:google-tag-manager":({payload:e})=>{let t=Object.assign({},e,{});return t.type="track",t.event="pageview",t.properties.fired_from="SlideRule Analytics",t.properties.ecommerce_event=!1,t},"identify:google-tag-manager":async({payload:e})=>{var n,r,a;let t=Object.assign({},e,{});return t.traits.ecommerce_event=!1,t.traits.fired_from="SlideRule Analytics",(n=t==null?void 0:t.traits)!=null&&n.email&&(t.traits.email_sha256=await qe(t.traits.email)),(a=(r=t==null?void 0:t.traits)==null?void 0:r.user_properties)!=null&&a.email&&(t.traits.email_sha256=await qe(t.traits.email)),t}},E_={name:"logger",page:({payload:e})=>{console.log("SlideRule Analytics: page",e)},track:({payload:e})=>{console.log("SlideRule Analytics: track",e)},identify:({payload:e})=>{console.log("SlideRule Analytics: identify",e)},reset:()=>{console.log("SlideRule Analytics: reset")},methods:{group:(e,t,n,r)=>{console.log("SlideRule Analytics: group",e,t,n,r)}}};let Rt=!1,Z=!1;const gi=(...e)=>{!Z||console.info(...["[react-facebook-pixel]"].concat(e))},W=(...e)=>{!Z||console.info(...["[react-facebook-pixel]"].concat(e))},oe=()=>(Rt||gi("Pixel not initialized before using call ReactPixel.init with required params"),Rt),D_={autoConfig:!0,debug:!1};var Cn={init(e,t={},n=D_){Rt=typeof window!="undefined"&&!!window.fbq,function(r,a,i,o,s,c,u){r.fbq||(s=r.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},r._fbq||(r._fbq=s),s.push=s,s.loaded=!0,s.version="2.0",s.queue=[],c=a.createElement(i),c.async=!0,c.src=o,u=a.getElementsByTagName(i)[0],u.parentNode.insertBefore(c,u))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),e?(n.autoConfig===!1&&fbq("set","autoConfig",!1,e),fbq("init",e,t),Rt=!0,Z=n.debug):gi("Please insert pixel id for initializing")},pageView(){!oe()||(fbq("track","PageView"),Z&&W("called fbq('track', 'PageView');"))},pageViewSingle(e){!oe()||(fbq("trackSingle",e,"PageView"),Z&&W("called fbq('trackSingle', 'PageView');"))},track(e,t,n){!oe()||(n?fbq("track",e,t,{eventID:n}):fbq("track",e,t),Z&&(W(`called fbq('track', '${e}');`),t&&W("with data",t)))},trackSingle(e,t,n,r){!oe()||(r?fbq("trackSingle",e,t,n,{eventID:r}):fbq("trackSingle",e,t,n),Z&&(W(`called fbq('trackSingle', '${e}', '${t}');`),n&&W("with data",n)))},trackCustom(e,t){!oe()||(fbq("trackCustom",e,t),Z&&(W(`called fbq('trackCustom', '${e}');`),t&&W("with data",t)))},trackSingleCustom(e,t,n){!oe()||(fbq("trackSingle",e,t,n),Z&&(W(`called fbq('trackSingleCustom', '${e}', '${t}');`),n&&W("with data",n)))},grantConsent(){!oe()||(fbq("consent","grant"),Z&&W("called fbq('consent', 'grant');"))},revokeConsent(){!oe()||(fbq("consent","revoke"),Z&&W("called fbq('consent', 'revoke');"))},fbq(...e){!oe()||(fbq(...e),Z&&(W(`called fbq('${e.slice(0,2).join("', '")}')`),e[2]&&W("with data",e[2])))}};const N_={pixelIds:[],advancedMatching:null,autoConfig:!0,debug:!1,sendUserIdOrAnonymousIdAsExternalId:!1};let hi=!1;function M_(e={}){return{name:"meta-pixel",config:{...N_,...e},initialize:async t=>{const{config:n}=t,{pixelIds:r,advancedMatching:a,autoConfig:i,debug:o,sendUserIdOrAnonymousIdAsExternalId:s}=n,c={autoConfig:i,debug:o},u=t.instance.user(),{userId:l,anonymousId:d}=u,m=u.traits?u.traits:{},{phone:g,email:_,firstName:y,lastName:v}=m,w={external_id:s?l||d:null,em:_,fn:y,ln:v,ph:g,ct:F(m,"address.city"),st:F(m,"address.province"),zp:F(m,"address.postalCode"),country:F(m,"address.country")},$=le({...w,...a},be),h=Object.keys($).length===0&&$.constructor===Object?null:$;r.forEach(O=>{Cn.init(O,h,c)}),hi=!0},page:t=>{const{config:{pixelIds:n}}=t;n.forEach(r=>{Cn.pageViewSingle(r)})},track:t=>{const{config:{pixelIds:n},payload:r}=t,a=F(r,"properties.event_id");let i=Object.assign({},r.properties,{});delete i.event_id,n.forEach(o=>{Cn.trackSingle(o,r.event,i,a)})},loaded:()=>hi}}var j_=yr,L_=Or,R_=Zt,q_=te,U_=De,F_=tt.exports,z_=nn,G_=tn,B_="[object Map]",H_="[object Set]",K_=Object.prototype,W_=K_.hasOwnProperty;function V_(e){if(e==null)return!0;if(U_(e)&&(q_(e)||typeof e=="string"||typeof e.splice=="function"||F_(e)||G_(e)||R_(e)))return!e.length;var t=L_(e);if(t==B_||t==H_)return!e.size;if(z_(e))return!j_(e).length;for(var n in e)if(W_.call(e,n))return!1;return!0}var J_=V_,X_=De;function Z_(e,t){return function(n,r){if(n==null)return n;if(!X_(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var Y_=Z_,Q_=Kg,ev=Y_,tv=ev(Q_),nv=tv,rv=nv,av=De;function iv(e,t){var n=-1,r=av(e)?Array(e.length):[];return rv(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var ov=iv,sv=fn,cv=je,uv=ov,lv=te;function dv(e,t){var n=lv(e)?sv:uv;return n(e,cv(t))}var yi=dv;function fv(e,t){for(var n,r=-1,a=e.length;++r<a;){var i=t(e[r]);i!==void 0&&(n=n===void 0?i:n+i)}return n}var mv=fv,pv=je,gv=mv;function hv(e,t){return e&&e.length?gv(e,pv(t)):0}var yv=hv;function _v(e){return e!==e}var vv=_v;function bv(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var wv=bv,$v=Br,Sv=vv,Iv=wv;function xv(e,t,n){return t===t?Iv(e,t,n):$v(e,Sv,n)}var Ov=xv,Av=Ov;function Pv(e,t){var n=e==null?0:e.length;return!!n&&Av(e,t,0)>-1}var kv=Pv;function Cv(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Tv=Cv;function Ev(){}var Dv=Ev,Tn=vr,Nv=Dv,Mv=Jt,jv=1/0,Lv=Tn&&1/Mv(new Tn([,-0]))[1]==jv?function(e){return new Tn(e)}:Nv,Rv=Lv,qv=er,Uv=kv,Fv=Tv,zv=tr,Gv=Rv,Bv=Jt,Hv=200;function Kv(e,t,n){var r=-1,a=Uv,i=e.length,o=!0,s=[],c=s;if(n)o=!1,a=Fv;else if(i>=Hv){var u=t?null:Gv(e);if(u)return Bv(u);o=!1,a=zv,c=new qv}else c=t?[]:s;e:for(;++r<i;){var l=e[r],d=t?t(l):l;if(l=n||l!==0?l:0,o&&d===d){for(var m=c.length;m--;)if(c[m]===d)continue e;t&&c.push(d),s.push(l)}else a(c,d,n)||(c!==s&&c.push(d),s.push(l))}return s}var Wv=Kv,Vv=Wv;function Jv(e){return e&&e.length?Vv(e):[]}var Xv=Jv;const Zv=e=>{if(e){const t=F(e,"item_name"),n=F(e,"item_variant");return t&&n?`${t} - ${n}`:t}},Yv=e=>te(e)?J_(e):be(e),Qv=async e=>{const{event:t,properties:n}=e;return le({content_type:"product_group",content_ids:n.items?Xv(yi(n.items,"item_product_id")):void 0,value:n.value,content_name:(()=>{if((t==="view_item"||t==="add_to_cart")&&n.items)return Zv(n.items[0])})(),currency:n.currency,content_category:F(n,"items[0].item_category"),num_items:(()=>{if(!(t==="view_item"||!n.items))return yv(n.items,"quantity")})(),order_id:n.transaction_id,event_id:await(async()=>{if(t==="purchase")return n.transaction_id;if(t==="add_to_cart"&&n.cart_token)return await qe(`_sra_event_id-${n.cart_token}-${n.items[0].item_id}`)})(),contents:(()=>{if(!(t==="view_item"||!n.items))return n.items?yi(n.items,r=>({id:r.item_product_id,quantity:r.quantity,item_price:r.price})):void 0})()},Yv)},eb=e=>{const{event:t}=e,n={view_item_list:r=>!1,contact_subscribe:r=>"Lead",view_item:r=>"ViewContent",add_to_cart:r=>"AddToCart",view_cart:r=>!1,purchase:r=>!1,default:r=>!1};return(n[t]||n.default)(e)},tb=async e=>{const t=eb(e);if(t===!1)return{eventName:null,properties:null};const n=await Qv(e);return{eventName:t,properties:n}},_i={name:"format-meta-pixel","track:meta-pixel":async({payload:e,plugins:t})=>{const{eventName:n,properties:r}=await tb(e);return{event:n,properties:r}}},nb=()=>{var a,i;const e="_sra_debug";let t=Me(window.location.href).debug,n=_e(e),r=!1;return t==="false"?Xg(e):t==="true"||n==="true"?(S("debug parameter found. debug mode in enabled.",!0),Ue(e,"true",1),r=!0):(((a=window.slideruleData)==null?void 0:a.themeMode)==="design"||((i=window.slideruleData)==null?void 0:i.themeMode)==="preview")&&(S("previewing theme. debug mode in enabled.",!0),r=!0),r},vi=async()=>{var y,v,w,$,P,h,O,R,M,j,z,q;const e=nb(),t=!1;S("starting main function.",e),window.slideruleData||(window.slideruleData={},window.slideruleData.destinations={});const n=(y=window==null?void 0:window.slideruleData)==null?void 0:y.customer,a=((w=(v=window.slideruleData)==null?void 0:v.shopifyLiquidData)==null?void 0:w.customer)||n,{id:i,address:o}=a||{};window.slideruleData.configurationOptions=k_(),S(`loading configuration options: ${JSON.stringify(($=window==null?void 0:window.slideruleData)==null?void 0:$.configurationOptions)}`,e);const{destinations:{google_analytics_4:s,google_tag_manager:c,meta_pixel:u,rakuten:l}}=window.slideruleData;let d=On({analytics:{enabled:!0,status:"default"},marketing:{enabled:!0,status:"default"},should_show_banner:!1});(h=(P=window==null?void 0:window.slideruleData)==null?void 0:P.configurationOptions)!=null&&h.consentManagement&&(d=await m_(e));const m=e||t?[pi,_i,ui,E_]:[pi,_i,ui],g=((R=(O=window==null?void 0:window.sraData)==null?void 0:O.measurementIds)==null?void 0:R.length)>0,_=localStorage.getItem("sliderule_ids");if(console.log({hasSraData:g,hasSraIds:_}),s&&!g&&!_&&(S("adding google analytics 4 plugin to libraries.",e),m.push(v_({measurementIds:s.measurementIds,sendPageView:!1,debug:e,gtagName:"gtag",parametersToStrip:P_,initalizedManually:((j=(M=window==null?void 0:window.slideruleData)==null?void 0:M.configurationOptions)==null?void 0:j.initalizeGA4Manually)||!1,consents:d}))),c){S("adding google tag manager plugin to libraries.",e);const{containerIds:H}=c,U=[];for(let K=0;K<H.length;K++){const A=H[K],E=K===0?li({containerId:A}):Object.assign({},li({containerId:A}),{name:"google-tag-manager-two"});U.push(E)}m.push(...U)}if(u){S("adding meta pixel plugin to libraries.",e);const{pixelIds:H}=u,U=le({external_id:i,em:a==null?void 0:a.email,fn:a==null?void 0:a.firstName,ln:a==null?void 0:a.lastName,ph:a==null?void 0:a.phone,ct:o==null?void 0:o.province,st:o==null?void 0:o.state,zp:o==null?void 0:o.zip,country:o==null?void 0:o.country},be);m.push(M_({pixelIds:H,sendUserIdOrAnonymousIdAsExternalId:!0,advancedMatching:U}))}l&&S("rakuten destination enabled. No pixel needed",e),window.slideruleData.initPlugins=m,d.analytics.enabled?(await ti(e,m,d),(q=(z=window==null?void 0:window.slideruleData)==null?void 0:z.configurationOptions)!=null&&q.dataActionTracking&&window.addEventListener("load",()=>{y_()})):(S("consent not granted. waiting for consent to load tracking libraries",e),await at(window.slideruleData.destinations,d.analytics.enabled,e))};document.readyState!=="loading"?vi():document.addEventListener("DOMContentLoaded",function(){vi()})})();
