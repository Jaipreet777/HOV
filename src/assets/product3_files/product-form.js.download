customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.querySelector("[name=id]").disabled=!1,this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.submitButton=this.querySelector('[type="submit"]'),document.querySelector("cart-drawer")&&this.submitButton.setAttribute("aria-haspopup","dialog"),this.hideErrors=this.dataset.hideErrors==="true"}onSubmitHandler(evt){evt.preventDefault();var additionalVariantId=null,customizatitonType="Custom",customizatitonValue="Custom",isBlousePadidng=!1,quantity=1,properties={},s_id=document.querySelector("#s_id")?document.querySelector("#s_id").value:null,standard_blouseStyle=document.querySelector('.standard select[name="properties[Blouse Padding]"]:not([disabled])')?document.querySelector('.standard select[name="properties[Blouse Padding]"]:not([disabled])').value:null,custom_blouseStyle=document.querySelector('.custom select[name="properties[Blouse Padding]"]:not([disabled])')?document.querySelector('.custom select[name="properties[Blouse Padding]"]:not([disabled])').value:null,plusSize=document.querySelector('.custom select[name="properties[Around Bust]"]:not([disabled])')?document.querySelector('.custom select[name="properties[Around Bust]"]:not([disabled])').value:null,kidsPlusSize=document.querySelector('.kidswear select[name="properties[Stitching Type]"]:not([disabled])')?document.querySelector('.kidswear select[name="properties[Stitching Type]"]:not([disabled])').value:null;if(standard_blouseStyle!=null&&standard_blouseStyle!="Without Blouse Padding"&&(isBlousePadidng=!0,additionalVariantId="41104985325650"),properties[customizatitonType]=customizatitonValue,custom_blouseStyle!=null&&custom_blouseStyle!="Without Blouse Padding"&&(isBlousePadidng=!0,additionalVariantId="41104985325650"),properties[customizatitonType]=custom_blouseStyle,plusSize!=null&&isBlousePadidng==!1){switch(plusSize){case"Size 43":additionalVariantId="41104985358418";break;case"Size 44":additionalVariantId="41104985391186";break;case"Size 45":additionalVariantId="41104985423954";break;case"Size 46":additionalVariantId="41104985456722";break;case"Size 47":additionalVariantId="41104985489490";break;case"Size 48":additionalVariantId="41104985522258";break;default:break}customizatitonType="",customizatitonValue=""}if(plusSize!=null&&isBlousePadidng==!0){switch(plusSize){case"Size 43":additionalVariantId="41108241645650";break;case"Size 44":additionalVariantId="41108241678418";break;case"Size 45":additionalVariantId="41108241711186";break;case"Size 46":additionalVariantId="41108241743954";break;case"Size 47":additionalVariantId="41108241776722";break;case"Size 48":additionalVariantId="41108241809490";break;default:break}customizatitonType="",customizatitonValue=""}if(kidsPlusSize!=null){switch(kidsPlusSize){case"7 Yrs":additionalVariantId="41134356627538";break;case"8 Yrs":additionalVariantId="41134356660306";break;case"9 Yrs":additionalVariantId="41134356693074";break;case"10 Yrs":additionalVariantId="41134356725842";break;case"11 Yrs":additionalVariantId="41134356758610";break;case"12 Yrs":additionalVariantId="41134356791378";break;default:break}customizatitonType="",customizatitonValue=""}if(properties._s_id=s_id,additionalVariantId!=null&&properties!=null){let addToCart2=function(variantId,quantity2,properties2){return fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:variantId,quantity:quantity2,properties:properties2||{}}]})}).then(response=>{if(setTimeout(()=>{document.getElementById("s_id").value="bn_"+Date.now()},4e3),!response.ok)throw new Error("Network response was not ok");return response.json()})};var addToCart=addToCart2;addToCart2(additionalVariantId,quantity,properties).then(()=>{if(this.submitButton.getAttribute("aria-disabled")==="true")return;this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.classList.add("loading"),this.querySelector(".loading__spinner").classList.remove("hidden");const config=fetchConfig("javascript");config.headers["X-Requested-With"]="XMLHttpRequest",delete config.headers["Content-Type"];const formData=new FormData(this.form);this.cart&&(formData.append("sections",this.cart.getSectionsToRender().map(section=>section.id)),formData.append("sections_url",window.location.pathname),this.cart.setActiveElement(document.activeElement)),config.body=formData,fetch(`${routes.cart_add_url}`,config).then(response=>response.json()).then(response=>{if(response.status){this.handleErrorMessage(response.description);const soldOutMessage=this.submitButton.querySelector(".sold-out-message");if(!soldOutMessage)return;this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.querySelector("span").classList.add("hidden"),soldOutMessage.classList.remove("hidden"),this.error=!0;return}else if(!this.cart){window.location=window.routes.cart_url;return}this.error=!1;const quickAddModal=this.closest("quick-add-modal");quickAddModal?(document.body.addEventListener("modalClosed",()=>{setTimeout(()=>{this.cart.renderContents(response)})},{once:!0}),quickAddModal.hide(!0)):this.cart.renderContents(response)}).catch(e=>{console.error(e)}).finally(()=>{this.submitButton.classList.remove("loading"),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||this.submitButton.removeAttribute("aria-disabled"),this.querySelector(".loading__spinner").classList.add("hidden")})}).catch(error=>{console.error("Error adding items to cart:",error)})}else{if(this.submitButton.getAttribute("aria-disabled")==="true")return;this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.classList.add("loading"),this.querySelector(".loading__spinner").classList.remove("hidden");const config=fetchConfig("javascript");config.headers["X-Requested-With"]="XMLHttpRequest",delete config.headers["Content-Type"];const formData=new FormData(this.form);this.cart&&(formData.append("sections",this.cart.getSectionsToRender().map(section=>section.id)),formData.append("sections_url",window.location.pathname),this.cart.setActiveElement(document.activeElement)),config.body=formData,fetch(`${routes.cart_add_url}`,config).then(response=>response.json()).then(response=>{if(response.status){this.handleErrorMessage(response.description);const soldOutMessage=this.submitButton.querySelector(".sold-out-message");if(!soldOutMessage)return;this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.querySelector("span").classList.add("hidden"),soldOutMessage.classList.remove("hidden"),this.error=!0;return}else if(!this.cart){window.location=window.routes.cart_url;return}this.error=!1;const quickAddModal=this.closest("quick-add-modal");quickAddModal?(document.body.addEventListener("modalClosed",()=>{setTimeout(()=>{this.cart.renderContents(response)})},{once:!0}),quickAddModal.hide(!0)):this.cart.renderContents(response)}).catch(e=>{console.error(e)}).finally(()=>{this.submitButton.classList.remove("loading"),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||this.submitButton.removeAttribute("aria-disabled"),this.querySelector(".loading__spinner").classList.add("hidden")})}}handleErrorMessage(errorMessage=!1){this.hideErrors||(this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessageWrapper&&(this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!errorMessage),errorMessage&&(this.errorMessage.textContent=errorMessage)))}});
//# sourceMappingURL=/cdn/shop/t/123/assets/product-form.js.map?v=177393036455408911441731293376
